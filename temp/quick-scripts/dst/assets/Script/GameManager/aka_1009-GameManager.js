
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/GameManager/aka_1009-GameManager.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '9a327yfiDRBvZGaHMkoFYzP', 'aka_1009-GameManager');
// Script/GameManager/aka_1009-GameManager.ts

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.GameManager1009 = exports.GAME_MANAGER_EVENT = void 0;
var EventEmitter = require("events");
var aka_1009_JoinGameData_1 = require("./aka_1009-JoinGameData");
var aka_1009_SpinGameData2_1 = require("./aka_1009-SpinGameData2");
globalThis.CHEAT_IDX = -1;
exports.GAME_MANAGER_EVENT = {
    'START_GAME_SUCCESS': 'start-game-success',
    'NORMAL_GAME_RESULT': 'normal-game-result',
    'FREE_GAME_RESULT': 'free-game-result',
    'BONUS_GAME_RESULT': 'bonus-game-result',
    'JACKPOT_UPDATE': 'jackpot-update',
    'JACKPOT_SHOW_MULTIPLE': 'jackpot_show_multiple',
    'JACKPOT_HIDE_MULTIPLE': 'jackpot_hide_multiple',
    'PLAYER_MONEY_UPDATE': 'player-money-update',
    'ERROR': 'error',
    'POPUP_INFO_MESSAGE': 'popup-info-message',
};
var GameManager1009 = /** @class */ (function () {
    function GameManager1009() {
        this._emitter = new EventEmitter();
        this.jackpotData = aka_1009_JoinGameData_1.default.allJackpotInfos;
        this.jackpotDataOrigin = JSON.parse(JSON.stringify(aka_1009_JoinGameData_1.default.allJackpotInfos));
        this.jackpotMessage = JSON.parse(JSON.stringify(aka_1009_JoinGameData_1.default.message));
        this.currentBetInfo = aka_1009_JoinGameData_1.default.currentBetInfo;
        this.playerMoney = 10000;
    }
    GameManager1009.getInstance = function () {
        if (GameManager1009.instance === null) {
            GameManager1009.instance = new GameManager1009();
        }
        return GameManager1009.instance;
    };
    GameManager1009.prototype.registerEvent = function (event, listener) {
        this._emitter.on(event, listener);
    };
    GameManager1009.prototype.removeAllListeners = function (event) {
        this._emitter.removeAllListeners(event);
    };
    GameManager1009.prototype.removeAllEvent = function () {
        this._emitter.removeAllListeners();
    };
    GameManager1009.prototype.removeListener = function (event, listener) {
        this._emitter.removeListener(event, listener);
    };
    GameManager1009.prototype.startGame = function () {
        var _this = this;
        var lastSpinData = this.getLastSpinData();
        if (lastSpinData.idxSpinData >= 0) {
            CHEAT_IDX = lastSpinData.idxSpinData;
            this.currentSpinData = this.getNextCurrentSpinData();
            this.currentSpinData.splice(0, this.currentSpinData.length - lastSpinData.lenRemainData - 1);
            CHEAT_IDX = -1;
            aka_1009_JoinGameData_1.default.playerState = this.currentSpinData.splice(0, 1)[0];
        }
        setTimeout(function () {
            _this._emitter.emit(exports.GAME_MANAGER_EVENT.START_GAME_SUCCESS, aka_1009_JoinGameData_1.default);
        }, random(100, 500));
    };
    GameManager1009.prototype.normalSpin = function (betId) {
        var _this = this;
        this.showMessageJackpot();
        // if (random(1, 100) <= 50)
        // {
        //     this.showMessageJackpot();
        // }
        // else
        // {
        //     this.hideMessageJackpot();
        // }
        //if (!this.currentSpinData || this.currentSpinData.length === 0) {
        var foundBetInfo = aka_1009_JoinGameData_1.default.betInfos.find(function (betInfo) {
            return betInfo.betId == betId;
        });
        this.currentBetInfo = foundBetInfo;
        this.currentSpinData = this.getNextCurrentSpinData();
        this.plusJackpot();
        this.plusPlayerMoney(-foundBetInfo.betAmount);
        setTimeout(function () {
            var resultSpin = _this.currentSpinData.splice(0, 1)[0];
            _this.checkWinJackpot(resultSpin);
            _this._emitter.emit(exports.GAME_MANAGER_EVENT.NORMAL_GAME_RESULT, resultSpin);
            _this.storeLastSpinData(CURRENT_IDX_SPIN_DATA, _this.currentSpinData.length);
            _this.checkFinishSession(resultSpin);
        }, random(100, 500));
        // } else {
        //     setTimeout(() => {
        //         this._emitter.emit(GAME_MANAGER_EVENT.ERROR, {code: 400});
        //     }, random(100, 500));
        // }
    };
    GameManager1009.prototype.freeSpin = function () {
        var _this = this;
        if (!this.currentSpinData || this.currentSpinData.length === 0) {
            setTimeout(function () {
                _this._emitter.emit(exports.GAME_MANAGER_EVENT.ERROR, { code: 400 });
            }, random(100, 500));
        }
        else {
            setTimeout(function () {
                var resultSpin = _this.currentSpinData.splice(0, 1)[0];
                _this.checkWinJackpot(resultSpin);
                _this._emitter.emit(exports.GAME_MANAGER_EVENT.FREE_GAME_RESULT, resultSpin);
                _this.storeLastSpinData(CURRENT_IDX_SPIN_DATA, _this.currentSpinData.length);
                _this.checkFinishSession(resultSpin);
            }, random(100, 500));
        }
    };
    /**
     *
     * @param item: 1-12
     */
    GameManager1009.prototype.bonusPlay = function (item) {
        var _this = this;
        if (!this.currentSpinData || this.currentSpinData.length === 0) {
            setTimeout(function () {
                _this._emitter.emit(exports.GAME_MANAGER_EVENT.ERROR, { code: 400 });
            }, random(100, 500));
        }
        else {
            console.log('bonusPlay with item:', item);
            setTimeout(function () {
                var resultSpin = _this.currentSpinData.splice(0, 1)[0];
                _this._emitter.emit(exports.GAME_MANAGER_EVENT.BONUS_GAME_RESULT, resultSpin);
                _this.storeLastSpinData(CURRENT_IDX_SPIN_DATA, _this.currentSpinData.length);
                _this.checkFinishSession(resultSpin);
            }, random(100, 500));
        }
    };
    GameManager1009.prototype.getJPHistory = function (from, size) {
        var jpHistoryList = [];
        var types = ['Jackpot', 'BigWin'];
        for (var i = 0; i < size; i++) {
            jpHistoryList.push({
                session: "#" + (2000 - (i + from)),
                time: Date.now() - (i + from) * 3600 * 1000,
                wonUser: "Nguyen van A" + (i + from),
                win: 50000000 + random(100000, 10000000),
                type: types[Math.floor(Math.random() * types.length)]
            });
        }
        var resultHistory = {
            from: from,
            size: size,
            total: 200,
            data: jpHistoryList,
        };
        return Promise.resolve(resultHistory);
    };
    GameManager1009.prototype.getBetHistory = function (from, size) {
        var betHistoryList = [];
        for (var i = 0; i < size; i++) {
            var betUnit = aka_1009_JoinGameData_1.default.betInfos[random(0, 5)].betAmount;
            var lineBet = 20;
            betHistoryList.push({
                session: "#" + (2000 - (i + from)),
                time: Date.now() - (i + from) * 3600 * 1000,
                betUnit: betUnit,
                lineBet: lineBet,
                totalBet: betUnit * lineBet,
                totalWin: random(100000, 10000000),
                lineWin: random(0, lineBet),
                spinData: ["King", "King", "King", "King", "King",
                    "King", "King", "King", "King", "King",
                    "King", "King", "King", "King", "King"]
            });
        }
        var resultHistory = {
            from: from,
            size: size,
            total: 200,
            data: betHistoryList,
        };
        return Promise.resolve(resultHistory);
    };
    GameManager1009.prototype.getPlayerMoney = function () {
        return this.playerMoney;
    };
    GameManager1009.prototype.checkWinJackpot = function (playerData) {
        // if (playerData.info.jackpotPayLine && playerData.info.jackpotPayLine && playerData.info.jackpotPayLine.length > 0) {
        //     this.resetJackpot();
        // }
    };
    GameManager1009.prototype.checkFinishSession = function (playerData) {
        if (playerData.isFinish) {
            var win = playerData.datas[playerData.datas.length - 1].content.win;
            console.warn('checkFinishSession: ', win);
            if (win > 0) {
                this.plusPlayerMoney(win);
            }
        }
    };
    GameManager1009.prototype.plusPlayerMoney = function (money) {
        this.playerMoney += money;
        this._emitter.emit(exports.GAME_MANAGER_EVENT.PLAYER_MONEY_UPDATE, this.playerMoney);
    };
    GameManager1009.prototype.storeLastSpinData = function (idxSpinData, lenRemainData) {
        localStorage.setItem('idxSpinData', idxSpinData.toString());
        localStorage.setItem('lenRemainData', lenRemainData.toString());
    };
    GameManager1009.prototype.getLastSpinData = function () {
        var idxSpinData = localStorage.getItem('idxSpinData') || '-1';
        var lenRemainData = localStorage.getItem('lenRemainData') || '0';
        return {
            idxSpinData: parseInt(idxSpinData),
            lenRemainData: parseInt(lenRemainData),
        };
    };
    GameManager1009.prototype.getNextCurrentSpinData = function () {
        var fakeDatas = aka_1009_SpinGameData2_1.default;
        var idx = CHEAT_IDX >= 0 && CHEAT_IDX < fakeDatas.length ? CHEAT_IDX : random(0, fakeDatas.length - 1);
        globalThis.CURRENT_IDX_SPIN_DATA = idx;
        return JSON.parse(JSON.stringify(fakeDatas[idx].data));
    };
    GameManager1009.prototype.plusJackpot = function () {
        var _this = this;
        this.currentBetInfo.jackpotInfos.forEach(function (_a) {
            var jackpotId = _a.jackpotId;
            _this.jackpotData[jackpotId].jackpotAmount += 100;
        });
        setTimeout(function () {
            _this._emitter.emit(exports.GAME_MANAGER_EVENT.JACKPOT_UPDATE, JSON.parse(JSON.stringify(_this.jackpotData)));
        }, 3000);
    };
    GameManager1009.prototype.showMessageJackpot = function () {
        var _this = this;
        setTimeout(function () {
            _this._emitter.emit(exports.GAME_MANAGER_EVENT.JACKPOT_SHOW_MULTIPLE, JSON.parse(JSON.stringify(_this.jackpotMessage)));
        }, 300);
    };
    GameManager1009.prototype.hideMessageJackpot = function () {
        var _this = this;
        setTimeout(function () {
            _this._emitter.emit(exports.GAME_MANAGER_EVENT.JACKPOT_HIDE_MULTIPLE, JSON.parse(JSON.stringify(_this.jackpotMessage)));
        }, 300);
    };
    GameManager1009.prototype.resetJackpot = function () {
        var _this = this;
        this.currentBetInfo.jackpotInfos.forEach(function (_a) {
            var jackpotId = _a.jackpotId;
            _this.jackpotData[jackpotId] = JSON.parse(JSON.stringify(_this.jackpotDataOrigin[jackpotId]));
        });
        setTimeout(function () {
            _this._emitter.emit(exports.GAME_MANAGER_EVENT.JACKPOT_UPDATE, JSON.parse(JSON.stringify(_this.jackpotData)));
        }, 300);
    };
    GameManager1009.instance = null;
    return GameManager1009;
}());
exports.GameManager1009 = GameManager1009;
function random(min, max) {
    return Math.round(Math.random() * (max - min) + min);
}

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9TY3JpcHQvR2FtZU1hbmFnZXIvYWthXzEwMDktR2FtZU1hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEscUNBQXdDO0FBRXhDLGlFQUFtRDtBQUNuRCxtRUFBb0Q7QUFTcEQsVUFBVSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUViLFFBQUEsa0JBQWtCLEdBQUc7SUFDOUIsb0JBQW9CLEVBQUcsb0JBQW9CO0lBQzNDLG9CQUFvQixFQUFHLG9CQUFvQjtJQUMzQyxrQkFBa0IsRUFBRyxrQkFBa0I7SUFDdkMsbUJBQW1CLEVBQUcsbUJBQW1CO0lBRXpDLGdCQUFnQixFQUFFLGdCQUFnQjtJQUNsQyx1QkFBdUIsRUFBRSx1QkFBdUI7SUFDaEQsdUJBQXVCLEVBQUcsdUJBQXVCO0lBQ2pELHFCQUFxQixFQUFHLHFCQUFxQjtJQUU3QyxPQUFPLEVBQUcsT0FBTztJQUNqQixvQkFBb0IsRUFBRyxvQkFBb0I7Q0FDOUMsQ0FBQTtBQUVEO0lBa0JJO1FBQ0ksSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRW5DLElBQUksQ0FBQyxXQUFXLEdBQUcsK0JBQVksQ0FBQyxlQUFlLENBQUM7UUFDaEQsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQywrQkFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7UUFDbEYsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsK0JBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ3ZFLElBQUksQ0FBQyxjQUFjLEdBQUcsK0JBQVksQ0FBQyxjQUFjLENBQUM7UUFFbEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7SUFDN0IsQ0FBQztJQWhCTSwyQkFBVyxHQUFsQjtRQUNJLElBQUcsZUFB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QyxJQUFJLENBQUMsMEJBQWtCLENBQUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEgsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFBO0lBQ1gsQ0FBQztJQUVPLHNDQUFZLEdBQXBCO1FBQUEsaUJBUUM7UUFQRyxJQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsVUFBQyxFQUFXO2dCQUFWLFNBQVMsZUFBQTtZQUNoRCxLQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hHLENBQUMsQ0FBQyxDQUFBO1FBRUYsVUFBVSxDQUFDO1lBQ1AsS0FBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsMEJBQWtCLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQTtJQUNYLENBQUM7SUE1Uk0sd0JBQVEsR0FBb0IsSUFBSSxDQUFDO0lBNlI1QyxzQkFBQztDQXZTRCxBQXVTQyxJQUFBO0FBdlNZLDBDQUFlO0FBeVM1QixTQUFTLE1BQU0sQ0FBQyxHQUFXLEVBQUUsR0FBVztJQUNwQyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ3pELENBQUMiLCJmaWxlIjoiIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJyk7XG5cbmltcG9ydCBqb2luR2FtZURhdGEgZnJvbSAnLi9ha2FfMTAwOS1Kb2luR2FtZURhdGEnO1xuaW1wb3J0IHNwaW5HYW1lRGF0YSBmcm9tICcuL2FrYV8xMDA5LVNwaW5HYW1lRGF0YTInO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxuICAgIHZhciBDSEVBVF9JRFg6IG51bWJlcjtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyXG4gICAgdmFyIENVUlJFTlRfSURYX1NQSU5fREFUQTogbnVtYmVyO1xufVxuXG5nbG9iYWxUaGlzLkNIRUFUX0lEWCA9IC0xO1xuXG5leHBvcnQgY29uc3QgR0FNRV9NQU5BR0VSX0VWRU5UID0ge1xuICAgICdTVEFSVF9HQU1FX1NVQ0NFU1MnIDogJ3N0YXJ0LWdhbWUtc3VjY2VzcycsXG4gICAgJ05PUk1BTF9HQU1FX1JFU1VMVCcgOiAnbm9ybWFsLWdhbWUtcmVzdWx0JyxcbiAgICAnRlJFRV9HQU1FX1JFU1VMVCcgOiAnZnJlZS1nYW1lLXJlc3VsdCcsXG4gICAgJ0JPTlVTX0dBTUVfUkVTVUxUJyA6ICdib251cy1nYW1lLXJlc3VsdCcsXG5cbiAgICAnSkFDS1BPVF9VUERBVEUnOiAnamFja3BvdC11cGRhdGUnLFxuICAgICdKQUNLUE9UX1NIT1dfTVVMVElQTEUnOiAnamFja3BvdF9zaG93X211bHRpcGxlJyxcbiAgICAnSkFDS1BPVF9ISURFX01VTFRJUExFJyA6ICdqYWNrcG90X2hpZGVfbXVsdGlwbGUnLFxuICAgICdQTEFZRVJfTU9ORVlfVVBEQVRFJyA6ICdwbGF5ZXItbW9uZXktdXBkYXRlJyxcbiAgICBcbiAgICAnRVJST1InIDogJ2Vycm9yJyxcbiAgICAnUE9QVVBfSU5GT19NRVNTQUdFJyA6ICdwb3B1cC1pbmZvLW1lc3NhZ2UnLFxufVxuXG5leHBvcnQgY2xhc3MgR2FtZU1hbmFnZXIxMDA5IHtcbiAgICBwcm90ZWN0ZWQgX2VtaXR0ZXI6IEV2ZW50RW1pdHRlcjtcbiAgICBwcm90ZWN0ZWQgamFja3BvdERhdGE6IHtba2V5OnN0cmluZ106IEphY2twb3RJbmZvfTtcbiAgICBwcm90ZWN0ZWQgamFja3BvdERhdGFPcmlnaW46IHtba2V5OnN0cmluZ106IEphY2twb3RJbmZvfTtcbiAgICBwcm90ZWN0ZWQgamFja3BvdE1lc3NhZ2U6IHtba2V5OnN0cmluZ106IEphY2twb3RNZXNzYWdlfTtcbiAgICBwcm90ZWN0ZWQgcGxheWVyTW9uZXk6IG51bWJlcjtcbiAgICBcbiAgICBwcm90ZWN0ZWQgY3VycmVudFNwaW5EYXRhOiBQbGF5ZXJEYXRhMTAwOVtdO1xuICAgIHByb3RlY3RlZCBjdXJyZW50QmV0SW5mbzogQmV0SW5mbztcblxuICAgIHN0YXRpYyBpbnN0YW5jZTogR2FtZU1hbmFnZXIxMDA5ID0gbnVsbDtcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKXtcbiAgICAgICAgaWYoR2FtZU1hbmFnZXIxMDA5Lmluc3RhbmNlID09PSBudWxsKXtcbiAgICAgICAgICAgIEdhbWVNYW5hZ2VyMTAwOS5pbnN0YW5jZSA9ICBuZXcgR2FtZU1hbmFnZXIxMDA5KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEdhbWVNYW5hZ2VyMTAwOS5pbnN0YW5jZTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgIHRoaXMuX2VtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICAgICAgdGhpcy5qYWNrcG90RGF0YSA9IGpvaW5HYW1lRGF0YS5hbGxKYWNrcG90SW5mb3M7XG4gICAgICAgIHRoaXMuamFja3BvdERhdGFPcmlnaW4gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGpvaW5HYW1lRGF0YS5hbGxKYWNrcG90SW5mb3MpKTtcbiAgICAgICAgdGhpcy5qYWNrcG90TWVzc2FnZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoam9pbkdhbWVEYXRhLm1lc3NhZ2UpKTtcbiAgICAgICAgdGhpcy5jdXJyZW50QmV0SW5mbyA9IGpvaW5HYW1lRGF0YS5jdXJyZW50QmV0SW5mbztcblxuICAgICAgICB0aGlzLnBsYXllck1vbmV5ID0gMTAwMDA7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJFdmVudChldmVudDogc3RyaW5nLCBsaXN0ZW5lcjogKC4uLmFyZ3M6IHVua25vd25bXSkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl9lbWl0dGVyLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgcmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fZW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpO1xuICAgIH1cblxuICAgIHJlbW92ZUFsbEV2ZW50KCkge1xuICAgICAgICB0aGlzLl9lbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIHJlbW92ZUxpc3RlbmVyKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiAoLi4uYXJnczogdW5rbm93bltdKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX2VtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBzdGFydEdhbWUoKSB7XG4gICAgICAgIGNvbnN0IGxhc3RTcGluRGF0YSA9IHRoaXMuZ2V0TGFzdFNwaW5EYXRhKCk7XG5cbiAgICAgICAgaWYgKGxhc3RTcGluRGF0YS5pZHhTcGluRGF0YSA+PSAwKSB7XG4gICAgICAgICAgICBDSEVBVF9JRFggPSBsYXN0U3BpbkRhdGEuaWR4U3BpbkRhdGE7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTcGluRGF0YSA9IHRoaXMuZ2V0TmV4dEN1cnJlbnRTcGluRGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3BpbkRhdGEuc3BsaWNlKDAsIHRoaXMuY3VycmVudFNwaW5EYXRhLmxlbmd0aCAtIGxhc3RTcGluRGF0YS5sZW5SZW1haW5EYXRhIC0gMSk7XG4gICAgICAgICAgICBDSEVBVF9JRFggPSAtMTtcbiAgICAgICAgICAgIGpvaW5HYW1lRGF0YS5wbGF5ZXJTdGF0ZSA9IHRoaXMuY3VycmVudFNwaW5EYXRhLnNwbGljZSgwLDEpWzBdO1xuICAgICAgICB9XG5cblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChHQU1FX01BTkFHRVJfRVZFTlQuU1RBUlRfR0FNRV9TVUNDRVNTLCBqb2luR2FtZURhdGEpXG4gICAgICAgIH0sIHJhbmRvbSgxMDAsIDUwMCkpO1xuICAgIH1cblxuICAgIG5vcm1hbFNwaW4oYmV0SWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNob3dNZXNzYWdlSmFja3BvdCgpO1xuICAgICAgICAvLyBpZiAocmFuZG9tKDEsIDEwMCkgPD0gNTApXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICAgIHRoaXMuc2hvd01lc3NhZ2VKYWNrcG90KCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gZWxzZVxuICAgICAgICAvLyB7XG4gICAgICAgIC8vICAgICB0aGlzLmhpZGVNZXNzYWdlSmFja3BvdCgpO1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vaWYgKCF0aGlzLmN1cnJlbnRTcGluRGF0YSB8fCB0aGlzLmN1cnJlbnRTcGluRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kQmV0SW5mbyA9IGpvaW5HYW1lRGF0YS5iZXRJbmZvcy5maW5kKChiZXRJbmZvKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJldEluZm8uYmV0SWQgPT0gYmV0SWQ7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCZXRJbmZvID0gZm91bmRCZXRJbmZvO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTcGluRGF0YSA9IHRoaXMuZ2V0TmV4dEN1cnJlbnRTcGluRGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5wbHVzSmFja3BvdCgpO1xuICAgICAgICAgICAgdGhpcy5wbHVzUGxheWVyTW9uZXkoLWZvdW5kQmV0SW5mby5iZXRBbW91bnQpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRTcGluOiBQbGF5ZXJEYXRhMTAwOSA9IHRoaXMuY3VycmVudFNwaW5EYXRhLnNwbGljZSgwLDEpWzBdO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja1dpbkphY2twb3QocmVzdWx0U3Bpbik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoR0FNRV9NQU5BR0VSX0VWRU5ULk5PUk1BTF9HQU1FX1JFU1VMVCwgcmVzdWx0U3Bpbik7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZUxhc3RTcGluRGF0YShDVVJSRU5UX0lEWF9TUElOX0RBVEEsIHRoaXMuY3VycmVudFNwaW5EYXRhLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrRmluaXNoU2Vzc2lvbihyZXN1bHRTcGluKTtcbiAgICAgICAgICAgIH0sIHJhbmRvbSgxMDAsIDUwMCkpO1xuXG4gICAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAgIC8vICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgLy8gICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoR0FNRV9NQU5BR0VSX0VWRU5ULkVSUk9SLCB7Y29kZTogNDAwfSk7XG4gICAgICAgIC8vICAgICB9LCByYW5kb20oMTAwLCA1MDApKTtcbiAgICAgICAgLy8gfVxuICAgIH1cblxuICAgIGZyZWVTcGluKCkge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFNwaW5EYXRhIHx8IHRoaXMuY3VycmVudFNwaW5EYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdHRlci5lbWl0KEdBTUVfTUFOQUdFUl9FVkVOVC5FUlJPUiwge2NvZGU6IDQwMH0pO1xuICAgICAgICAgICAgfSwgcmFuZG9tKDEwMCwgNTAwKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRTcGluID0gdGhpcy5jdXJyZW50U3BpbkRhdGEuc3BsaWNlKDAsMSlbMF07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrV2luSmFja3BvdChyZXN1bHRTcGluKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChHQU1FX01BTkFHRVJfRVZFTlQuRlJFRV9HQU1FX1JFU1VMVCwgcmVzdWx0U3Bpbik7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZUxhc3RTcGluRGF0YShDVVJSRU5UX0lEWF9TUElOX0RBVEEsIHRoaXMuY3VycmVudFNwaW5EYXRhLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrRmluaXNoU2Vzc2lvbihyZXN1bHRTcGluKTtcbiAgICAgICAgICAgIH0sIHJhbmRvbSgxMDAsIDUwMCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIGl0ZW06IDEtMTJcbiAgICAgKi9cbiAgICBib251c1BsYXkoaXRlbTogbnVtYmVyKSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50U3BpbkRhdGEgfHwgdGhpcy5jdXJyZW50U3BpbkRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoR0FNRV9NQU5BR0VSX0VWRU5ULkVSUk9SLCB7Y29kZTogNDAwfSk7XG4gICAgICAgICAgICB9LCByYW5kb20oMTAwLCA1MDApKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdib251c1BsYXkgd2l0aCBpdGVtOicsIGl0ZW0pO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IC8vIGJvbnVzIGluY3JlYXNlbWVudCBpbmRleFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdFNwaW4gPSB0aGlzLmN1cnJlbnRTcGluRGF0YS5zcGxpY2UoMCwxKVswXTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoR0FNRV9NQU5BR0VSX0VWRU5ULkJPTlVTX0dBTUVfUkVTVUxULCByZXN1bHRTcGluKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JlTGFzdFNwaW5EYXRhKENVUlJFTlRfSURYX1NQSU5fREFUQSwgdGhpcy5jdXJyZW50U3BpbkRhdGEubGVuZ3RoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tGaW5pc2hTZXNzaW9uKHJlc3VsdFNwaW4pO1xuICAgICAgICAgICAgfSwgcmFuZG9tKDEwMCwgNTAwKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRKUEhpc3RvcnkoZnJvbTogbnVtYmVyLCBzaXplOiBudW1iZXIpIDogUHJvbWlzZTx7XG4gICAgICAgIGRhdGE6IEpQSGlzdG9yeVtdLFxuICAgICAgICBmcm9tOiBudW1iZXIsXG4gICAgICAgIHNpemU6IG51bWJlcixcbiAgICAgICAgdG90YWw6IG51bWJlcixcbiAgICB9PiB7XG4gICAgICAgIGNvbnN0IGpwSGlzdG9yeUxpc3Q6IEpQSGlzdG9yeVtdID0gW107XG5cbiAgICAgICAgdmFyIHR5cGVzID0gWydKYWNrcG90JywnQmlnV2luJ107XG4gICAgIFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAgICAganBIaXN0b3J5TGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiBgIyR7MjAwMCAtIChpICsgZnJvbSl9YCxcbiAgICAgICAgICAgICAgICB0aW1lOiBEYXRlLm5vdygpIC0gKGkgKyBmcm9tKSAqIDM2MDAgKiAxMDAwLFxuICAgICAgICAgICAgICAgIHdvblVzZXI6IGBOZ3V5ZW4gdmFuIEEke2kgKyBmcm9tfWAsICAgICBcbiAgICAgICAgICAgICAgICB3aW46IDUwMDAwMDAwICsgcmFuZG9tKDEwMDAwMCwgMTAwMDAwMDApLFxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHR5cGVzLmxlbmd0aCldXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0SGlzdG9yeToge1xuICAgICAgICAgICAgZGF0YTogSlBIaXN0b3J5W10sXG4gICAgICAgICAgICBmcm9tOiBudW1iZXIsXG4gICAgICAgICAgICBzaXplOiBudW1iZXIsXG4gICAgICAgICAgICB0b3RhbDogbnVtYmVyLFxuICAgICAgICB9ID0ge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHNpemUsXG4gICAgICAgICAgICB0b3RhbDogMjAwLFxuICAgICAgICAgICAgZGF0YToganBIaXN0b3J5TGlzdCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRIaXN0b3J5KTtcbiAgICB9XG5cbiAgICBnZXRCZXRIaXN0b3J5KGZyb206IG51bWJlcixzaXplOiBudW1iZXIpOiBQcm9taXNlPHtcbiAgICAgICAgZGF0YTogQmV0SGlzdG9yeVtdLFxuICAgICAgICBmcm9tOiBudW1iZXIsXG4gICAgICAgIHNpemU6IG51bWJlcixcbiAgICAgICAgdG90YWw6IG51bWJlcixcbiAgICB9PntcbiAgICAgICAgY29uc3QgYmV0SGlzdG9yeUxpc3Q6IEJldEhpc3RvcnlbXSA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBiZXRVbml0ID0gam9pbkdhbWVEYXRhLmJldEluZm9zW3JhbmRvbSgwLDUpXS5iZXRBbW91bnQ7XG4gICAgICAgICAgICBjb25zdCBsaW5lQmV0ID0gMjA7XG4gICAgICAgICAgICBiZXRIaXN0b3J5TGlzdC5wdXNoKFxuICAgICAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb246IGAjJHsyMDAwIC0gKGkgKyBmcm9tKX1gLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBEYXRlLm5vdygpIC0gKGkgKyBmcm9tKSAqIDM2MDAgKiAxMDAwLCBcbiAgICAgICAgICAgICAgICAgICAgYmV0VW5pdCwgXG4gICAgICAgICAgICAgICAgICAgIGxpbmVCZXQsIFxuICAgICAgICAgICAgICAgICAgICB0b3RhbEJldDogYmV0VW5pdCAqIGxpbmVCZXQsIFxuICAgICAgICAgICAgICAgICAgICB0b3RhbFdpbjogcmFuZG9tKDEwMDAwMCwgMTAwMDAwMDApLCBcbiAgICAgICAgICAgICAgICAgICAgbGluZVdpbjogcmFuZG9tKDAsIGxpbmVCZXQpLFxuICAgICAgICAgICAgICAgICAgICBzcGluRGF0YTogW1wiS2luZ1wiLCBcIktpbmdcIiwgXCJLaW5nXCIsIFwiS2luZ1wiLCBcIktpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiS2luZ1wiLCBcIktpbmdcIiwgXCJLaW5nXCIsIFwiS2luZ1wiLCBcIktpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiS2luZ1wiLCBcIktpbmdcIiwgXCJLaW5nXCIsIFwiS2luZ1wiLCBcIktpbmdcIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXN1bHRIaXN0b3J5OiB7XG4gICAgICAgICAgICBkYXRhOiBCZXRIaXN0b3J5W10sXG4gICAgICAgICAgICBmcm9tOiBudW1iZXIsXG4gICAgICAgICAgICBzaXplOiBudW1iZXIsXG4gICAgICAgICAgICB0b3RhbDogbnVtYmVyLFxuICAgICAgICB9ID0ge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHNpemUsXG4gICAgICAgICAgICB0b3RhbDogMjAwLFxuICAgICAgICAgICAgZGF0YTogYmV0SGlzdG9yeUxpc3QsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0SGlzdG9yeSk7XG4gICAgfVxuXG4gICAgZ2V0UGxheWVyTW9uZXkoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGxheWVyTW9uZXk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjaGVja1dpbkphY2twb3QocGxheWVyRGF0YTogUGxheWVyRGF0YTEwMDkpIHtcbiAgICAgICAgLy8gaWYgKHBsYXllckRhdGEuaW5mby5qYWNrcG90UGF5TGluZSAmJiBwbGF5ZXJEYXRhLmluZm8uamFja3BvdFBheUxpbmUgJiYgcGxheWVyRGF0YS5pbmZvLmphY2twb3RQYXlMaW5lLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gICAgIHRoaXMucmVzZXRKYWNrcG90KCk7XG4gICAgICAgIC8vIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNoZWNrRmluaXNoU2Vzc2lvbihwbGF5ZXJEYXRhOiBQbGF5ZXJEYXRhMTAwOSkge1xuICAgICAgICBpZiAocGxheWVyRGF0YS5pc0ZpbmlzaCkge1xuICAgICAgICAgICAgdmFyIHdpbiA9IHBsYXllckRhdGEuZGF0YXNbcGxheWVyRGF0YS5kYXRhcy5sZW5ndGggLSAxXS5jb250ZW50LndpbjtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignY2hlY2tGaW5pc2hTZXNzaW9uOiAnLCB3aW4pO1xuICAgICAgICAgICAgaWYgKHdpbiA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdXNQbGF5ZXJNb25leSh3aW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwbHVzUGxheWVyTW9uZXkobW9uZXk6IG51bWJlcikge1xuICAgICAgICB0aGlzLnBsYXllck1vbmV5ICs9IG1vbmV5O1xuICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoR0FNRV9NQU5BR0VSX0VWRU5ULlBMQVlFUl9NT05FWV9VUERBVEUsIHRoaXMucGxheWVyTW9uZXkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RvcmVMYXN0U3BpbkRhdGEoaWR4U3BpbkRhdGE6IG51bWJlciwgbGVuUmVtYWluRGF0YTogbnVtYmVyKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZHhTcGluRGF0YScsIGlkeFNwaW5EYXRhLnRvU3RyaW5nKCkpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGVuUmVtYWluRGF0YScsIGxlblJlbWFpbkRhdGEudG9TdHJpbmcoKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRMYXN0U3BpbkRhdGEoKToge2lkeFNwaW5EYXRhOiBudW1iZXIsIGxlblJlbWFpbkRhdGE6IG51bWJlcn0ge1xuICAgICAgICBjb25zdCBpZHhTcGluRGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpZHhTcGluRGF0YScpIHx8ICctMSc7XG4gICAgICAgIGNvbnN0IGxlblJlbWFpbkRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGVuUmVtYWluRGF0YScpIHx8ICcwJztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWR4U3BpbkRhdGE6IHBhcnNlSW50KGlkeFNwaW5EYXRhKSxcbiAgICAgICAgICAgIGxlblJlbWFpbkRhdGE6IHBhcnNlSW50KGxlblJlbWFpbkRhdGEpLFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXROZXh0Q3VycmVudFNwaW5EYXRhKCk6IFBsYXllckRhdGExMDA5W10ge1xuICAgICAgICB2YXIgZmFrZURhdGFzID0gc3BpbkdhbWVEYXRhO1xuICAgICAgICBjb25zdCBpZHggPSBDSEVBVF9JRFggPj0gMCAmJiBDSEVBVF9JRFggPCBmYWtlRGF0YXMubGVuZ3RoID8gQ0hFQVRfSURYIDogcmFuZG9tKDAsIGZha2VEYXRhcy5sZW5ndGgtMSk7XG4gICAgICAgIGdsb2JhbFRoaXMuQ1VSUkVOVF9JRFhfU1BJTl9EQVRBID0gaWR4O1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmYWtlRGF0YXNbaWR4XS5kYXRhKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwbHVzSmFja3BvdCgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50QmV0SW5mby5qYWNrcG90SW5mb3MuZm9yRWFjaCgoe2phY2twb3RJZH0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuamFja3BvdERhdGFbamFja3BvdElkXS5qYWNrcG90QW1vdW50ICs9IDEwMDtcbiAgICAgICAgfSlcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChHQU1FX01BTkFHRVJfRVZFTlQuSkFDS1BPVF9VUERBVEUsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5qYWNrcG90RGF0YSkpKTtcbiAgICAgICAgfSwgMzAwMClcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dNZXNzYWdlSmFja3BvdCgpXG4gICAge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChHQU1FX01BTkFHRVJfRVZFTlQuSkFDS1BPVF9TSE9XX01VTFRJUExFLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuamFja3BvdE1lc3NhZ2UpKSk7XG4gICAgICAgIH0sIDMwMClcbiAgICB9XG5cbiAgICBwcml2YXRlIGhpZGVNZXNzYWdlSmFja3BvdCgpXG4gICAge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdChHQU1FX01BTkFHRVJfRVZFTlQuSkFDS1BPVF9ISURFX01VTFRJUExFLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuamFja3BvdE1lc3NhZ2UpKSk7XG4gICAgICAgIH0sIDMwMClcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0SmFja3BvdCgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50QmV0SW5mby5qYWNrcG90SW5mb3MuZm9yRWFjaCgoe2phY2twb3RJZH0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuamFja3BvdERhdGFbamFja3BvdElkXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5qYWNrcG90RGF0YU9yaWdpbltqYWNrcG90SWRdKSk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9lbWl0dGVyLmVtaXQoR0FNRV9NQU5BR0VSX0VWRU5ULkpBQ0tQT1RfVVBEQVRFLCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuamFja3BvdERhdGEpKSk7XG4gICAgICAgIH0sIDMwMClcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJhbmRvbShtaW46IG51bWJlciwgbWF4OiBudW1iZXIpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEphY2twb3RJbmZvIHtcbiAgICBqYWNrcG90SWQ6IHN0cmluZztcbiAgICBqYWNrcG90QW1vdW50OiBudW1iZXI7XG4gICBcbiAgICBsZXZlbDogbnVtYmVyO1xufVxuZXhwb3J0IGludGVyZmFjZSBKYWNrcG90TWVzc2FnZSB7XG4gICAgamFja3BvdElkOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldEluZm8ge1xuICAgIGJldElkOiBzdHJpbmc7XG4gICAgYmV0QW1vdW50OiBudW1iZXI7XG4gICAgamFja3BvdEluZm9zOiBKYWNrcG90SW5mb1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEpvaW5HYW1lTW9kZWw8VD4ge1xuICAgIGJldEluZm9zOiBCZXRJbmZvW107XG4gICAgY3VycmVudEJldEluZm86IEJldEluZm87XG4gICAgYWxsSmFja3BvdEluZm9zIDoge1trZXk6c3RyaW5nXTogSmFja3BvdEluZm99O1xuICAgIHBsYXllclN0YXRlOiBUO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEpQSGlzdG9yeSB7XG4gICAgc2Vzc2lvbjogc3RyaW5nLFxuICAgIHRpbWU6IG51bWJlcixcbiAgICB3b25Vc2VyOiBzdHJpbmcsXG4gICAgd2luOiBudW1iZXIsXG4gICAgdHlwZTogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0SGlzdG9yeSB7IFxuICAgIHNlc3Npb246IHN0cmluZyxcbiAgICB0aW1lOiBudW1iZXIsXG4gICAgYmV0VW5pdDogbnVtYmVyLFxuICAgIGxpbmVCZXQ6IG51bWJlcixcbiAgICB0b3RhbEJldDogbnVtYmVyLFxuICAgIHRvdGFsV2luOiBudW1iZXIsIFxuICAgIGxpbmVXaW46IG51bWJlcixcbiAgICBzcGluRGF0YTpzdHJpbmdbXVxufVxuXG4vLyBleHBvcnQgaW50ZXJmYWNlIFBsYXllckRhdGExMDA5IHtcbi8vICAgICBzdGF0ZTogbnVtYmVyXG4vLyAgICAgYmV0SWQ6IHN0cmluZ1xuLy8gICAgIG5vcm1hbEdhbWVNYXRyaXg6IHN0cmluZ1tdXG4vLyAgICAgYmV0RGVub206IG51bWJlclxuLy8gICAgIGlzRmluaXNoOiBib29sZWFuXG4vLyAgICAgZ2FtZU51bTogc3RyaW5nXG4vLyAgICAgZGF0YTogRGF0YVxuLy8gICAgIGlkeDogbnVtYmVyXG4vLyAgICAgYm9udXNHYW1lUmVtYWluOiBudW1iZXJcbi8vICAgICBib251c0dhbWVUb3RhbDogbnVtYmVyXG4vLyAgICAgdG90YWxXaW5BbW91bnQ6IG51bWJlclxuLy8gICAgIG5vcm1hbFBheUxpbmVzOiBOb3JtYWxQYXlMaW5lW11cbi8vICAgICBub3JtYWxXaW5BbW91bnQ6IG51bWJlclxuLy8gICAgIGZyZWVHYW1lUmVtYWluOiBudW1iZXJcbi8vICAgICBmcmVlR2FtZVRvdGFsOiBudW1iZXJcbi8vICAgICBmcmVlR2FtZU1hdHJpeDogc3RyaW5nW11cbi8vICAgICBmcmVlV2luQW1vdW50OiBudW1iZXJcbi8vICAgICBmcmVlR2FtZVBheWxpbmVzOiBGcmVlR2FtZVBheWxpbmVbXVxuLy8gICAgIGphY2twb3RQYXlMaW5lOiBzdHJpbmdbXVxuLy8gfVxuZXhwb3J0IGludGVyZmFjZSBQbGF5ZXJEYXRhMTAwOSB7XG4gICAgZGF0YXM6IGFueVtdXG4gICAgaW5mbzogYW55XG4gICAgaXNGaW5pc2g6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBEYXRhIHtcbiAgICBzY2F0dGVyQ291bnROb3JtYWw6IG51bWJlclxuICAgIG5vcm1hbE1hdHJpeE9yaWdpbjogc3RyaW5nW11cbiAgICBtdWx0aXBsaWVyQm9udXM6IG51bWJlclxuICAgIHNjYXR0ZXJDb3VudEZyZWU6IG51bWJlclxuICAgIGZyZWVNYXRyaXhPcmlnaW46IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm9ybWFsUGF5TGluZSB7XG4gICAgcHNjOiBzdHJpbmdcbiAgICBwd2E6IG51bWJlclxuICAgIHB3cmM6IG51bWJlclxuICAgIHB3bDogbnVtYmVyXG4gICAgcG06IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZyZWVHYW1lUGF5bGluZSB7XG4gICAgcHNjOiBzdHJpbmdcbiAgICBwd2E6IG51bWJlclxuICAgIHB3cmM6IG51bWJlclxuICAgIHB3bDogbnVtYmVyXG4gICAgcG06IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0YXJ0R2FtZURhdGExMDA5IHtcbiAgICBhbGxKYWNrcG90SW5mb3M6IHsgW2tleTogc3RyaW5nXTogSmFja3BvdEluZm8gfVxuICAgIGJldEluZm9zOiBCZXRJbmZvW11cbiAgICBjdXJyZW50QmV0SW5mbzogQ3VycmVudEJldEluZm9cbiAgICBwbGF5ZXJTdGF0ZTogUGxheWVyRGF0YTEwMDlcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRJbmZvIHtcbiAgICBiZXRJZDogc3RyaW5nXG4gICAgYmV0QW1vdW50OiBudW1iZXJcbiAgICBiZXREZW5vbTogbnVtYmVyXG4gICAgamFja3BvdEluZm9zOiBKYWNrcG90SW5mb1tdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3VycmVudEJldEluZm8ge1xuICAgIGJldElkOiBzdHJpbmdcbiAgICBiZXRBbW91bnQ6IG51bWJlclxuICAgIGJldERlbm9tOiBudW1iZXJcbiAgICBqYWNrcG90SW5mb3M6IEphY2twb3RJbmZvW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb3B1cEluZm9NZXNzYWdlIHtcbiAgICB0eXBlOiAnaW5mbycgfCAnY2xvc2UtZ2FtZScsXG4gICAgbWVzc2FnZTogc3RyaW5nLFxufSJdfQ==