{"version":3,"sources":["assets\\Script\\base\\sound\\Slot45-sound-controller.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Slot45EventManager } from \"../events/Slot45-event-manager\";\r\nimport Slot45SFXPlayerActor from \"./Slot45-sfs-player\";\r\nimport Slot45MusicPlayerActor from \"./Slot45-music-player\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Slot45SoundControllerActor extends cc.Component {\r\n\r\n    public static Instance: Slot45SoundControllerActor;\r\n    private localStorage: any = null;\r\n\r\n    @property(Slot45MusicPlayerActor)\r\n    musicPlayer: Slot45MusicPlayerActor = null;\r\n\r\n    @property(Slot45SFXPlayerActor)\r\n    sfxPlayer: Slot45SFXPlayerActor = null;\r\n\r\n    isMuteSfx: boolean = false;\r\n    isMuteMusic: boolean = false;\r\n    isMuteAll: boolean = false;\r\n    private constructor() {\r\n        super();\r\n        Slot45SoundControllerActor.Instance = this; \r\n    }\r\n    \r\n    protected onLoad(): void {\r\n        cc.game.addPersistRootNode(this.node);\r\n        Slot45EventManager.GetInstance().register(\"Music-on\", this.UnmuteMusic.bind(this));\r\n        Slot45EventManager.GetInstance().register(\"Music-off\", this.MuteMusic.bind(this));\r\n        Slot45EventManager.GetInstance().register(\"Sound-on\", this.UnmuteSfx.bind(this));\r\n        Slot45EventManager.GetInstance().register(\"Sound-off\", this.MuteSfx.bind(this));\r\n        \r\n        cc.sys.localStorage.getItem('enableSFXKey') == \"false\" ? this.MuteSfx() : this.UnmuteSfx();\r\n        cc.sys.localStorage.getItem('enableBGMKey') == \"false\" ? this.MuteMusic() : this.UnmuteMusic();\r\n    }\r\n\r\n    public MuteSfx(): void {\r\n        this.isMuteSfx = true;\r\n        this.sfxPlayer.Mute();\r\n        cc.sys.localStorage.setItem('enableSFXKey', \"false\");\r\n    }\r\n\r\n    public UnmuteSfx(): void {\r\n        this.isMuteSfx = false;\r\n        this.sfxPlayer.Unmute();\r\n        cc.sys.localStorage.setItem('enableSFXKey',\"true\");\r\n    }\r\n\r\n    public MuteMusic(): void {\r\n        this.isMuteMusic = true;\r\n        this.musicPlayer.Mute();\r\n        cc.sys.localStorage.setItem('enableBGMKey', \"false\");\r\n    }\r\n\r\n    public UnmuteMusic(): void {\r\n        this.isMuteMusic = false;\r\n        this.musicPlayer.Unmute();\r\n        cc.sys.localStorage.setItem('enableBGMKey', \"true\");\r\n    }\r\n\r\n    public AddSfx(name: any) {\r\n        this.sfxPlayer.AddAudio(name);\r\n    }\r\n\r\n    public AddMusic(name) {\r\n        this.musicPlayer.AddAudio(name);\r\n    }\r\n\r\n    public PlaySfx(name: string, isLoop: boolean): void {\r\n       \r\n        this.sfxPlayer.Play(name, isLoop);\r\n    }\r\n\r\n    public StopSfx(name: string): void {\r\n       \r\n        this.sfxPlayer.Stop(name);\r\n    }\r\n\r\n    public StopSfxWithFadeOut(name: string, duration: number): void {\r\n    \r\n        this.sfxPlayer.StopWithFadeOut(name, duration);\r\n    }\r\n\r\n    public StopAllSfx(): void {\r\n        this.sfxPlayer.StopAll();\r\n    }\r\n\r\n    public StopAllNonLoopingSfx(): void {\r\n       \r\n\r\n        this.sfxPlayer.StopAllNonLoopingSfx();\r\n    }\r\n\r\n    public StopAllSfxWithFadeOut(duration: number): void {\r\n        this.sfxPlayer.StopAllWithFadeOut(duration);\r\n    }\r\n\r\n    public StopAllNonLoopingSfxWithFadeOut(duration: number): void {\r\n     \r\n\r\n        this.sfxPlayer.StopAllNonLoopingSfxWithFadeOut(duration);\r\n    }\r\n\r\n    public HasSfx(name: string): boolean {\r\n       \r\n        return this.sfxPlayer.HasAudio(name);\r\n    }\r\n\r\n    public PlayMusic(name: string): void {\r\n       \r\n        this.musicPlayer.Play(name, true);\r\n    }\r\n\r\n    public StopMusic(name: string): void {\r\n    \r\n        this.musicPlayer.Stop(name);\r\n    }\r\n\r\n    public StopMusicWithFadeOut(name: string, duration: number): void {\r\n    \r\n        this.musicPlayer.StopWithFadeOut(name, duration);\r\n    }\r\n\r\n    public HasMusic(name: string): boolean {\r\n        \r\n        return this.musicPlayer.HasAudio(name);\r\n    }\r\n\r\n    public ToggleMuteMusic(): void {\r\n        \r\n        if (this.isMuteMusic)\r\n        {\r\n            this.UnmuteMusic();\r\n        }\r\n        else\r\n        {\r\n            this.MuteMusic();\r\n        }\r\n    }\r\n\r\n    public IsMuteMusic(): boolean {\r\n      \r\n        return this.isMuteMusic;\r\n    }\r\n\r\n    public ToggleMuteSfx(): void {\r\n      \r\n        if (this.isMuteSfx)\r\n        {\r\n            this.UnmuteSfx();\r\n        }\r\n        else\r\n        {\r\n            this.MuteSfx();\r\n        }\r\n    }\r\n   \r\n    public IsMuteSfx(): boolean {\r\n     \r\n        return this.isMuteSfx;\r\n    }\r\n\r\n    public IsMuteSound(): boolean {\r\n       \r\n        return this.isMuteAll;\r\n    }\r\n\r\n    public SetMusicVolume(volume: number): void {\r\n      \r\n        this.musicPlayer.SetVolume(volume);\r\n    }\r\n\r\n    public GetMusicVolume(): Number {\r\n    \r\n        return this.musicPlayer.GetVolume();\r\n    }\r\n\r\n    public SetSfxVolume(volume: number): void {\r\n      \r\n        this.sfxPlayer.SetVolume(volume);\r\n    }\r\n\r\n    public GetSfxVolume(): number {\r\n    \r\n        return this.sfxPlayer.GetVolume();\r\n    }\r\n\r\n    public GetMusicDuration(name: string): number {\r\n\r\n        return this.musicPlayer.GetAudioDuration(name);\r\n    }\r\n\r\n    public GetSfxDuration(name: string): number {\r\n      \r\n        return this.sfxPlayer.GetAudioDuration(name);\r\n    }\r\n\r\n    public GetCurrentMusic(): any {   \r\n        return this.musicPlayer.GetAudioPlaying();\r\n    }\r\n}\r\n"]}