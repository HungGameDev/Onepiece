{"version":3,"sources":["assets/Script/UI/spin-panel/aka-g1009-spin-panel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { SlottyParameter } from \"../../aka-g1009-game-config\";\nimport G1009Util from \"../../base/Util/aka-g1009-number-converter\";\nimport { G1009EventManager } from \"../../base/events/aka-g1009-event-manager\";\nimport G1009SpinItemActor, { ESpinningState } from \"./aka-g1009-spin-item\";\nimport { G1009SpinItemData } from \"./aka-g1009-spin-item-data\";\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class G1009SpinPanelActor extends cc.Component {\n\n\t@property(G1009SpinItemActor)\n\tspinItems: G1009SpinItemActor[] = [];\n\n\tprivate spinItemData: G1009SpinItemData = new G1009SpinItemData();\n\tprivate spinningItems: G1009SpinItemActor[] = [];\n\tprivate isTurbo: boolean = false;\n\tprivate isStopImmediately: boolean = false;\n\tprivate spinItemScrollCount: number = 0;\n\tprivate spinItemStopCount: number = 0;\n\tprivate spinItemReadyBounceUpCount: number = 0;\n\tprivate isReadyToStop: boolean = false;\n\tprivate landingCount: number = 0;\n\tprivate tensions: number[] = [];\n\tprivate dataResponded: string[] = [];\n\tprivate expandWildIndices: number[] = [];\n\tprivate tweenHideItem: cc.Tween = null;\n\n\tprivate register(): void {\n\t\tG1009EventManager.GetInstance().register(\"Turbo\", this.OnTurbo.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"SpinStarted\", this.OnSpinStarted.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"DataRespond\", this.onDataRespond.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"StopImmediately\", this.stopImmediately.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"SetItems\", this.SetItems.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"SetOldItems\", this.SetOldItems.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"TensionStarted\", this.onTensionStarted.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"TensionGenerated\", this.onTensionGenerated.bind(this));\n\t\t//G1009EventManager.GetInstance().register(\"PresentWinStart\", this.onHideItems.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"ResetAllLine\", this.onResetAllLine.bind(this));\n\t\t// G1009EventManager.GetInstance().register(\"JackpotStarted\", this.onHideItems.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"PresentAllWinComplete\", this.onPresentAllWinComplete.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"ExpandWildStarted\", this.onExpandWildStarted.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"ExpandWildHide\", this.onExpandWildHide.bind(this));\n\t}\n\n\tprotected onLoad(): void {\n\t\tthis.register();\n\t\tlet initData = Object.assign({}, this.spinItemData);\n\t\tfor (let index = 0; index < this.spinItems.length; index++) {\n\t\t\tconst spinItem = this.spinItems[index];\n\t\t\tspinItem.Init(initData);\n\t\t\tspinItem.onStopSpinCompleted = this.spinItemStopCompleted.bind(this);\n\t\t\tspinItem.onReadyToStop = this.readyToStop.bind(this);\n\t\t\tspinItem.onReadyBounceUp = this.spinItemReadyBounceUp.bind(this);\n\t\t}\n\t\tthis.reset();\n\t\tthis.spinItems.forEach(spinItem => spinItem.Enable());\n\t}\n\n\tprivate onTensionGenerated(indices: number[]): void {\n\t\tthis.tensions = indices;\n\t}\n\n\tprivate onTensionStarted(id: number): void {\n\t\tthis.spinItems[id].TensionStarted();\n\t}\n\n\tprivate readyToStop(): void {\n\t\tthis.spinItemScrollCount++;\n\t}\n\n\tprivate OnTurbo(isTurbo: boolean) {\n\t\tthis.isTurbo = isTurbo;\n\t}\n\n\tprivate onDataRespond(spinResult: string[]) {\n\t\tthis.dataResponded = spinResult;\n\t\tif (this.isStopImmediately && this.checkReadyToStop()) {\n\t\t\tthis.stopSpin(spinResult);\n\t\t}\n\t\telse {\n\t\t\tG1009Util.Instance().WaitUntil(this.checkReadyToStop.bind(this)).then(() => {\n\t\t\t\tthis.stopSpin(spinResult);\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic OnSpinStarted() {\n\t\tthis.reset();\n\t\tthis.resetExpandWild();\n\t\tthis.spinItems.forEach(spinItem => spinItem.Enable());\n\t\tthis.spin(this.isTurbo);\n\t\tif (this.isTurbo === true) {\n\t\t\tthis.stopImmediately();\n\t\t}\n\t}\n\n\tpublic spin(isTurbo: boolean) {\n\t\tthis.spinningItems = this.spinItems;\n\t\tlet delayTime = isTurbo ? 0 : this.spinItemData.DelayTimeSpinBetweenItems;\n\t\tfor (let index = 0; index < this.spinItems.length; index++) {\n\t\t\tconst spinItem = this.spinItems[index];\n\t\t\tlet seq = cc.sequence(\n\t\t\t\tcc.delayTime(delayTime * index)\n\t\t\t\t, cc.callFunc(() => {\n\t\t\t\t\tspinItem.Spin();\n\t\t\t\t\tif (index == this.spinItems.length - 1) {\n\t\t\t\t\t\tthis.isReadyToStop = true;\n\t\t\t\t\t}\n\t\t\t\t}, this, spinItem));\n\t\t\tthis.node.runAction(seq);\n\t\t}\n\t}\n\n\tprivate stopImmediately() {\n\t\tthis.landingCount = 0;\n\t\tthis.isStopImmediately = true;\n\n\t\tif (this.checkDataResponde() && this.checkReadyToStop()) {\n\t\t\tthis.node.stopAllActions();\n\t\t\tfor (var index = this.spinItemStopCount; index < this.spinningItems.length; index++) {\n\t\t\t\tif (this.spinningItems[index].state == ESpinningState.Idle) {\n\t\t\t\t\tthis.spinningItems[index].Spin();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.spinningItems.forEach(i => i.StopImmediately(this.isTurbo));\n\t\t\tthis.spinningItems.forEach(i => i.Stop(this.dataResponded));\n\n\t\t\tif (this.spinItemStopCount >= this.spinningItems.length) {\n\t\t\t\tthis.checkSpinEnd();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate checkReadyToStop() {\n\t\treturn this.isReadyToStop && this.spinItemScrollCount == this.spinItems.length;\n\t}\n\n\tprivate spinItemStopCompleted(cellIndices: number[]): void {\n\t\tG1009EventManager.GetInstance().notify(\"SpinItemStopCompleted\", {\n\t\t\tcellIndices: cellIndices,\n\t\t});\n\t\tthis.spinItemStopCount++;\n\t\tthis.checkSpinEnd();\n\t}\n\n\tprivate spinItemReadyBounceUp(): void {\n\t\tthis.spinItemReadyBounceUpCount++;\n\t\tif (this.isStopImmediately && this.spinItemReadyBounceUpCount == this.spinningItems.length) {\n\t\t\tthis.spinItems.forEach(spinItem => spinItem.AllowBounceUp());\n\t\t}\n\t}\n\n\tprivate checkSpinEnd(): void {\n\t\tlet isSpinEnd = this.spinItemStopCount >= this.spinningItems.length && this.landingCount == 0;\n\n\t\tif (isSpinEnd) {\n\t\t\tthis.spinEnd();\n\t\t}\n\t}\n\n\tprivate spinEnd(): void {\n\t\tthis.reset();\n\t\tG1009EventManager.GetInstance().notify(\"SpinComplete\");\n\t}\n\n\tprivate stopSpin(items: string[]) {\n\t\tif (this.isStopImmediately) {\n\t\t\tthis.stopImmediately();\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let index = 0; index < this.spinningItems.length; index++) {\n\t\t\tconst spinItem = this.spinningItems[index];\n\t\t\tlet tensionDuration = 0;\n\t\t\tif (this.tensions.indexOf(index) != -1) {\n\t\t\t\ttensionDuration = this.spinItemData.TensionDuration * (this.tensions.indexOf(index) + 1);\n\t\t\t}\n\n\t\t\tlet seq = cc.sequence(\n\t\t\t\tcc.delayTime(this.spinItemData.DelayTimeStopBetweenItems * index + tensionDuration)\n\t\t\t\t, cc.callFunc(() => {\n\t\t\t\t\tspinItem.Stop(items);\n\t\t\t\t}, this, spinItem));\n\t\t\tthis.node.runAction(seq);\n\t\t}\n\t}\n\n\tonExpandWildStarted(expandWildIndices: number[]): void {\n\t\tthis.expandWildIndices = Object.assign([], expandWildIndices);\n\t\texpandWildIndices.forEach(cellIndex => {\n\t\t\tlet reelIndex = SlottyParameter.GetReelIndex(cellIndex);\n\t\t\tcc.tween(this.spinItems[reelIndex].node)\n\t\t\t\t.to(0.1, { opacity: 0 })\n\t\t\t\t.start();\n\t\t});\n\t}\n\n\tonExpandWildHide(): void {\n\t\tthis.spinItems.forEach(spinItem => {\n\t\t\tspinItem.node.y = 0;\n\t\t\tspinItem.node.opacity = 255;\n\t\t});\n\t}\n\n\tonLandingGenerated(data: number[]): void {\n\t\tthis.landingCount = data.length;\n\t}\n\n\tonLandingStarted(): void {\n\t}\n\n\tonLandingCompleted(): void {\n\t\tthis.landingCount--;\n\t\tthis.checkSpinEnd();\n\t}\n\n\tprivate SetItems(reelData: string[]) {\n\t\tthis.spinItems.forEach(spinItem => spinItem.SetItems(reelData));\n\t}\n\n\tprivate SetOldItems(data: any) {\n\t\tlet indices = data.expandWildIndices.map((index: number) => SlottyParameter.GetReelIndex(index));\n\t\tthis.spinItems.forEach((spinItem, index) => {\n\t\t\tif (!indices.includes(SlottyParameter.GetReelIndex(index))) {\n\t\t\t\tspinItem.node.opacity = 255;\n\t\t\t} else {\n\t\t\t\tspinItem.node.opacity = 0;\n\t\t\t}\n\t\t});\n\t\tthis.spinItems.forEach(spinItem => spinItem.SetOldItems(data.Cells));\n\t\tif (data.WinLines.length > 0) {\n\t\t\tthis.onHideItems();\n\t\t}\n\t}\n\n\tprivate onHideItems(): void {\n\t\t// this.spinItems.forEach(spinItem => spinItem.node.opacity = 0)\n\t\tthis.tweenHideItem = cc.tween(this.node).delay(0.1).call(() => {\n\t\t\tthis.spinItems.forEach(spinItem => spinItem.node.opacity = 0)\n\t\t}).start();\n\t}\n\n\tprivate onResetAllLine(): void {\n\t\tthis.resetItemNotExpandWild();\n\t}\n\n\tprivate checkDataResponde(): boolean {\n\t\treturn this.dataResponded.length > 0;\n\t}\n\n\tprivate reset() {\n\t\tthis.isReadyToStop = false;\n\t\tthis.spinItemReadyBounceUpCount = 0;\n\t\tthis.isStopImmediately = false;\n\t\tthis.spinItemStopCount = 0;\n\t\tthis.spinItemScrollCount = 0;\n\t\tthis.spinningItems = [];\n\t\tthis.tensions = [];\n\t\tthis.spinItems.forEach(spinItem => spinItem.Reset());\n\t\tthis.resetItemNotExpandWild();\n\t\tthis.dataResponded = [];\n\t}\n\n\tprivate resetItemNotExpandWild(): void {\n\t\tthis.tweenHideItem && this.tweenHideItem.stop();\n\t\tlet indices = this.expandWildIndices.map(index => SlottyParameter.GetReelIndex(index));\n\t\tthis.spinItems.forEach((spinItem, index) => {\n\t\t\tif (!indices.includes(SlottyParameter.GetReelIndex(index))) {\n\t\t\t\tspinItem.node.opacity = 255;\n\t\t\t} else {\n\t\t\t\tspinItem.node.opacity = 0;\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate resetExpandWild(): void {\n\t\tthis.expandWildIndices = [];\n\t\tthis.spinItems.forEach(spinItem => spinItem.node.opacity = 255);\n\t}\n\n\tprivate onPresentAllWinComplete(): void {\n\t\tthis.spinItems.forEach(spinItem => spinItem.Reset());\n\t\tthis.resetItemNotExpandWild();\n\t}\n}\n"]}