{"version":3,"sources":["assets/Script/UI/aka-g1009-notification-message.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import G1009Util from \"../base/Util/aka-g1009-number-converter\";\nimport { G1009EventManager } from \"../base/events/aka-g1009-event-manager\";\nimport { G1009SpriteProviderManagerActor } from \"./provider/aka-g1009-sprite-frame-provider\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n\t@property(cc.Label)\n\tlabel: cc.Label = null;\n\n\t@property(cc.Node)\n\tlineMessage: cc.Node = null;\n\n\t@property(cc.Label)\n\twinNumber: cc.Label = null;\n\n\t@property(cc.Label)\n\twinPoint: cc.Label = null;\n\n\t@property(cc.Sprite)\n\twinIcon: cc.Sprite = null;\n\n\t@property(cc.Label)\n\ttotalWinPoint: cc.Label = null;\n\n\tSymbolFormat: string = 'symbol_%s';\n\n\tprivate isFreespins: boolean = false;\n\tprivate tweenCountPoint: cc.Tween;\n\tprivate currentPoint: number = 0;\n\n\tprotected onLoad(): void {\n\t\tthis.register();\n\t}\n\n\tprivate register(): void {\n\t\tG1009EventManager.GetInstance().register(\"SpinStarted\", this.reset.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"NotificationWinMessage\", this.onMessages.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"SetTotalWin\", this.onSetTotalWin.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"StopImmediately\", this.onStopImmediately.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"EnterFreespins\", this.onEnterFreespins.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"featureWinCompleted\", this.onFeatureWinCompleted.bind(this));\n\t\tG1009EventManager.GetInstance().register(\"resume\", this.onResume.bind(this));\n\t}\n\n\tprivate onResume(data: any) {\n\t\tif (data.isFreespins)\n\t\t{\n\t\t\tthis.isFreespins = true;\n\t\t\tthis.totalWinPoint.string = G1009Util.Instance().NumberFormatWithoutCharacter(data.totalWinPoint);\n\t\t}\n\t}\n\n\tprivate onMessages(mesageData: any) {\n\t\tif (mesageData.WinPoint == 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.lineMessage.active = false;\n\t\tthis.label.node.active = false;\n\t\tif (!mesageData.isAllWin)       \n\t\t{\n\t\t\tif (mesageData.WinSymbol != \"Scatter\" && mesageData.WinSymbol != \"Bonus\")\n\t\t\t{\n\t\t\t\tthis.winNumber.string = mesageData.WinNumber[0] + 1;\n\t\t\t\tthis.winPoint.string = G1009Util.Instance().NumberFormatWithoutCharacter(mesageData.WinPoint);\n\t\t\t\tthis.winIcon.spriteFrame = G1009SpriteProviderManagerActor.Instance().GetFrame(cc.js.formatStr(this.SymbolFormat, mesageData.WinSymbol));\n\t\t\t\tthis.lineMessage.active = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onSetTotalWin(point: number): void {\n\t\tlet objTween = {\n\t\t\tvalue: this.currentPoint\n\t\t};\n\t\tthis.totalWinPoint.node.opacity = 255;\n\t\tthis.countPoint(objTween, point, 0.25);\n\t}\n\n\tprivate countPoint(objTween: { value: number; }, point: number, duration: number, delay: number = 0, callback = () => { }) {\n\t\tthis.tweenCountPoint = cc.tween(objTween)\n\t\t\t.delay(delay)\n\t\t\t.to(duration, { value: point }, {\n\t\t\t\tprogress: (start: any, end: any, current: any, ratio: any) => {\n\t\t\t\t\tthis.totalWinPoint.string = G1009Util.Instance().NumberFormatWithoutCharacter(Math.floor(current));\n\t\t\t\t\treturn start + (end - start) * ratio;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.call(() => {\n\t\t\t\tthis.totalWinPoint.string = G1009Util.Instance().NumberFormatWithoutCharacter(point);\n\t\t\t\tthis.currentPoint = point;\n\t\t\t})\n\t\tthis.tweenCountPoint.start();\n\t}\n\n\tprivate onEnterFreespins(): void {\n\t\tthis.isFreespins = true;\n\t}\n\n\tprivate onFeatureWinCompleted(data): void {\n\t\tif(data && data.hitRule == \"bonus\")\n        {\n            return;\n        }\n\t\tthis.isFreespins = false;\n\t\tthis.reset();\n\t}\n\n\tprivate reset(): void {\n\t\tif (!this.isFreespins)\n\t\t{\n\t\t\tcc.tween(this.totalWinPoint.node)\n\t\t\t\t.delay(0.25)\n\t\t\t\t.to(0.25, { opacity: 0 })\n\t\t\t\t.call(() => {\n\t\t\t\t\tthis.currentPoint = 0;\n\t\t\t\t\tthis.totalWinPoint.string = \"\";\n\t\t\t\t}).start();\n\t\t}\n\t\tthis.lineMessage.active = false;\n\t\tthis.label.node.active = false;\n\t}\n\n\tprivate onStopImmediately(): void {\n\t\tif (!this.isFreespins)\n\t\t{\n\t\t\tif (this.currentPoint > 0)\n\t\t\t{\n\t\t\t\tthis.tweenCountPoint && this.tweenCountPoint.stop();\n\t\t\t\tthis.totalWinPoint.string = G1009Util.Instance().NumberFormatWithoutCharacter(this.currentPoint);\n\t\t\t\tthis.totalWinPoint.node.opacity = 255;\n\t\t\t}\n\t\t}\n\t}\n}"]}