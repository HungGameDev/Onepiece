{"version":3,"sources":["assets\\Script\\UI\\Slot45-notification-message.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Slot45Util from \"../base/Util/Slot45-number-converter\";\r\nimport { Slot45EventManager } from \"../base/events/Slot45-event-manager\";\r\nimport { Slot45SpriteProviderManagerActor } from \"./provider/Slot45-sprite-frame-provider\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n\t@property(cc.Label)\r\n\tlabel: cc.Label = null;\r\n\r\n\t@property(cc.Node)\r\n\tlineMessage: cc.Node = null;\r\n\r\n\t@property(cc.Label)\r\n\twinNumber: cc.Label = null;\r\n\r\n\t@property(cc.Label)\r\n\twinPoint: cc.Label = null;\r\n\r\n\t@property(cc.Sprite)\r\n\twinIcon: cc.Sprite = null;\r\n\r\n\t@property(cc.Label)\r\n\ttotalWinPoint: cc.Label = null;\r\n\r\n\tSymbolFormat: string = 'symbol_%s';\r\n\r\n\tprivate isFreespins: boolean = false;\r\n\tprivate tweenCountPoint: cc.Tween;\r\n\tprivate currentPoint: number = 0;\r\n\r\n\tprotected onLoad(): void {\r\n\t\tthis.register();\r\n\t}\r\n\r\n\tprivate register(): void {\r\n\t\tSlot45EventManager.GetInstance().register(\"SpinStarted\", this.reset.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"NotificationWinMessage\", this.onMessages.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"SetTotalWin\", this.onSetTotalWin.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"StopImmediately\", this.onStopImmediately.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"EnterFreespins\", this.onEnterFreespins.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"featureWinCompleted\", this.onFeatureWinCompleted.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"resume\", this.onResume.bind(this));\r\n\t}\r\n\r\n\tprivate onResume(data: any) {\r\n\t\tif (data.isFreespins)\r\n\t\t{\r\n\t\t\tthis.isFreespins = true;\r\n\t\t\tthis.totalWinPoint.string = Slot45Util.Instance().NumberFormatWithoutCharacter(data.totalWinPoint);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onMessages(mesageData: any) {\r\n\t\tif (mesageData.WinPoint == 0)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.lineMessage.active = false;\r\n\t\tthis.label.node.active = false;\r\n\t\tif (!mesageData.isAllWin)       \r\n\t\t{\r\n\t\t\tif (mesageData.WinSymbol != \"Scatter\" && mesageData.WinSymbol != \"Bonus\")\r\n\t\t\t{\r\n\t\t\t\tthis.winNumber.string = mesageData.WinNumber[0] + 1;\r\n\t\t\t\tthis.winPoint.string = Slot45Util.Instance().NumberFormatWithoutCharacter(mesageData.WinPoint);\r\n\t\t\t\tthis.winIcon.spriteFrame = Slot45SpriteProviderManagerActor.Instance().GetFrame(cc.js.formatStr(this.SymbolFormat, mesageData.WinSymbol));\r\n\t\t\t\tthis.lineMessage.active = true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onSetTotalWin(point: number): void {\r\n\t\tlet objTween = {\r\n\t\t\tvalue: this.currentPoint\r\n\t\t};\r\n\t\tthis.totalWinPoint.node.opacity = 255;\r\n\t\tthis.countPoint(objTween, point, 0.25);\r\n\t}\r\n\r\n\tprivate countPoint(objTween: { value: number; }, point: number, duration: number, delay: number = 0, callback = () => { }) {\r\n\t\tthis.tweenCountPoint = cc.tween(objTween)\r\n\t\t\t.delay(delay)\r\n\t\t\t.to(duration, { value: point }, {\r\n\t\t\t\tprogress: (start: any, end: any, current: any, ratio: any) => {\r\n\t\t\t\t\tthis.totalWinPoint.string = Slot45Util.Instance().NumberFormatWithoutCharacter(Math.floor(current));\r\n\t\t\t\t\treturn start + (end - start) * ratio;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.call(() => {\r\n\t\t\t\tthis.totalWinPoint.string = Slot45Util.Instance().NumberFormatWithoutCharacter(point);\r\n\t\t\t\tthis.currentPoint = point;\r\n\t\t\t})\r\n\t\tthis.tweenCountPoint.start();\r\n\t}\r\n\r\n\tprivate onEnterFreespins(): void {\r\n\t\tthis.isFreespins = true;\r\n\t}\r\n\r\n\tprivate onFeatureWinCompleted(data): void {\r\n\t\tif(data && data.hitRule == \"bonus\")\r\n        {\r\n            return;\r\n        }\r\n\t\tthis.isFreespins = false;\r\n\t\tthis.reset();\r\n\t}\r\n\r\n\tprivate reset(): void {\r\n\t\tif (!this.isFreespins)\r\n\t\t{\r\n\t\t\tcc.tween(this.totalWinPoint.node)\r\n\t\t\t\t.delay(0.25)\r\n\t\t\t\t.to(0.25, { opacity: 0 })\r\n\t\t\t\t.call(() => {\r\n\t\t\t\t\tthis.currentPoint = 0;\r\n\t\t\t\t\tthis.totalWinPoint.string = \"\";\r\n\t\t\t\t}).start();\r\n\t\t}\r\n\t\tthis.lineMessage.active = false;\r\n\t\tthis.label.node.active = false;\r\n\t}\r\n\r\n\tprivate onStopImmediately(): void {\r\n\t\tif (!this.isFreespins)\r\n\t\t{\r\n\t\t\tif (this.currentPoint > 0)\r\n\t\t\t{\r\n\t\t\t\tthis.tweenCountPoint && this.tweenCountPoint.stop();\r\n\t\t\t\tthis.totalWinPoint.string = Slot45Util.Instance().NumberFormatWithoutCharacter(this.currentPoint);\r\n\t\t\t\tthis.totalWinPoint.node.opacity = 255;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}"]}