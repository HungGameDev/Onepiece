{"version":3,"sources":["assets\\Script\\base\\Slot45-simulator-server.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { G1009WinLineResult } from \"../UI/present-win/Slot45-present-win-panel\";\r\nimport { G1009BalanceModel } from \"../models/Slot45-balance-model\";\r\nimport { G1009BetModel } from \"../models/Slot45-bet-model\";\r\nimport { G1009EventManager } from \"./events/Slot45-event-manager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\nconst TOTAL_FREESPINS = 5;\r\n@ccclass\r\nexport default class G1009SimulatorServer extends cc.Component {\r\n\r\n\tresult: any = null;\r\n\twinlineContent: number[][];\r\n\tWinLines: G1009WinLineResult[];\r\n\twinLineAndScatter: G1009WinLineResult[];\r\n\twinScatters: G1009WinLineResult[];\r\n\twinBonus: G1009WinLineResult[];\r\n\tprivate isFreespins: boolean = false;\r\n\tprivate freespinLeft: number = 0;\r\n\tprivate totalFreespins: number = 0;\r\n\tprivate isRetrigger: boolean = false;\r\n\tprivate totalWinPoint: number = 0;\r\n\r\n\tprotected onLoad(): void {\r\n\t\tthis.register();\r\n\t\tthis.WinLines = [\r\n\t\t\tnew G1009WinLineResult([0, 1, 2, 3, 4], 25000, [1]),\r\n\t\t\tnew G1009WinLineResult([5, 6, 7, 8, 9], 25000, [0]),\r\n\t\t\tnew G1009WinLineResult([10, 11, 12, 13, 14], 25000, [2])\r\n\t\t];\r\n\t\tthis.winLineAndScatter = [\r\n\t\t\tnew G1009WinLineResult([0, 1, 2, 3, 4], 40000, [1], \"A\"),\r\n\t\t\tnew G1009WinLineResult([5, 6, 7, 8, 9], 40000, [0], \"Q\"),\r\n\t\t];\r\n\t\tthis.winScatters = [\r\n\t\t\tnew G1009WinLineResult([10, 12, 14], 0, [-1], \"Scatter\")\r\n\t\t];\r\n\r\n\t\tthis.winBonus = [\r\n\t\t\tnew G1009WinLineResult([1, 2, 3], 0, [-1], \"Bonus\")\r\n\t\t];\r\n\r\n\t\tthis.winlineContent = [[5, 6, 7, 8, 9], [0, 1, 2, 3, 4], [10, 11, 12, 13, 14]];\r\n\t\t//, [0, 6, 12, 8, 4], [10, 6, 3, 8, 14]\r\n\t\tG1009BetModel.GetInstance().SetBetPerLines([100, 250, 1000, 2500, 10000, 25000,50000]);\r\n\t\tG1009BetModel.GetInstance().SetBetMultiplier(20);\r\n\t\tG1009BalanceModel.GetInstance().SetBalance(1000);\r\n\t}\r\n\r\n\tprotected start(): void {\r\n\t\tsetTimeout(() => {\r\n\t\t\tG1009EventManager.GetInstance().notify(\"init\");\r\n\t\t}, 0.1);\r\n\t}\r\n\r\n\tprivate register(): void {\r\n\t\tG1009EventManager.GetInstance().register(\"SpinRequest\", this.onSpinRequest.bind(this));\r\n\t}\r\n\r\n\tprivate fakeBalanceSpin() {\r\n\t\tif (!this.isFreespins)\r\n\t\t{\r\n\t\t\tlet newBalance = G1009BalanceModel.GetInstance().GetBalance() - G1009BetModel.GetInstance().GetTotalBetPoint();\r\n\t\t\tG1009BalanceModel.GetInstance().SetBalance(newBalance);\r\n\t\t\tG1009EventManager.GetInstance().notify(\"BalanceChange\");\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onSpinRequest(): void {\r\n\t\tlet isEndround = false;\r\n\t\tlet isRetrigger = false;\r\n\t\tlet isExpandWild = false;\r\n\t\tlet winPoint = 0;\r\n\t\tlet featureData = {};\r\n\t\tlet featureDatas = [];\r\n\t\tlet winBonus = [];\r\n\t\tlet jackpotWinPoint = 0;\r\n\t\tlet expandWildIndices = 0;\r\n\t\tfeatureData = {\r\n\t\t\thitRule: \"freespins\",\r\n\t\t\ttotalFreespins: TOTAL_FREESPINS,\r\n\t\t\tisRetrigger: false,\r\n\t\t};\r\n\t\tthis.fakeBalanceSpin();\r\n\t\tlet cellsResult = this.generateDemoResult();\r\n\t\t//fake winline\r\n\t\tlet WinLines: G1009WinLineResult[] = [];\r\n\t\tlet winScatters = [];\r\n\r\n\t\t// //fake freespin Win and bonus win\r\n\t\t({ featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround } = this.fakeFreespinWin(featureDatas, featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround));\r\n\r\n\t\t// //fake freespin Win short with bigwin\r\n\t\t// ({ featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices,  isEndround } = this.fakeBigWinInShortFreespins(featureDatas, featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround));\r\n\r\n\t\t//fake jackpot\r\n\t\t// ({ featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround, jackpotWinPoint } = this.fakeJackpot(featureDatas, featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround, jackpotWinPoint));\r\n\r\n\t\t//check bug\r\n\t\t// ({ featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround, jackpotWinPoint } = this.fakebug(featureDatas, featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround, jackpotWinPoint));\r\n\r\n\t\tWinLines.forEach(winLine => winPoint += winLine.GetWinPoint());\r\n\r\n\t\tthis.result = {\r\n\t\t\tCells: cellsResult,\r\n\t\t\tWinLines: WinLines,\r\n\t\t\tWinScatters: winScatters,\r\n\t\t\tWinBonus: winBonus,\r\n\t\t\tfeatureDatas: featureDatas,\r\n\t\t\tfreespinLeft: this.freespinLeft,\r\n\t\t\ttotalFreespins: this.totalFreespins,\r\n\t\t\tisFreespins: this.isFreespins,\r\n\t\t\tisEndround: isEndround,\r\n\t\t\tisExpandWild: isExpandWild,\r\n\t\t\texpandWildIndices: expandWildIndices,\r\n\t\t\twinPoint: winPoint,\r\n\t\t\ttotalWinPoint: this.totalWinPoint,\r\n\t\t\tjackpotWinPoint: jackpotWinPoint,\r\n\t\t}\r\n\t\tif (this.freespinLeft == 0)\r\n\t\t{\r\n\t\t\tthis.isFreespins = false;\r\n\t\t}\r\n\r\n\t\tthis.simulatorServer();\r\n\t}\r\n\r\n\tprivate fakebug(featureDatas: any[], featureData: {}, cellsResult: string[], WinLines: G1009WinLineResult[], winScatters: any[], winBonus: any[], isExpandWild: boolean, expandWildIndices: number, isEndround: boolean, jackpotWinPoint: number) {\r\n\t\tcellsResult = [\r\n\t\t\t\"K\",\r\n\t\t\t\"Core\",\r\n\t\t\t\"Core\",\r\n\t\t\t\"Q\",\r\n\t\t\t\"Scatter\",\r\n\t\t\t\"Wrench\",\r\n\t\t\t\"Wrench\",\r\n\t\t\t\"Core\",\r\n\t\t\t\"Scatter\",\r\n\t\t\t\"K\",\r\n\t\t\t\"Scatter\",\r\n\t\t\t\"A\",\r\n\t\t\t\"Core\",\r\n\t\t\t\"Q\",\r\n\t\t\t\"Helmet\"\r\n\t\t]\r\n\t\t// WinLines = Object.assign([], this.WinLines);\r\n\t\t// WinLines[0].SetWinSymbol(cellsResult[0]);\r\n\t\t// WinLines[1].SetWinSymbol(cellsResult[5]);\r\n\t\t// WinLines[2].SetWinSymbol(cellsResult[10]);\r\n\t\t// isExpandWild = true;\r\n\t\t// expandWildIndices = 12;\r\n\t\t// jackpotWinPoint = 1000000;\r\n\t\treturn { featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround, jackpotWinPoint };\r\n\t}\r\n\r\n\tprivate fakeJackpot(featureDatas: any[], featureData: {}, cellsResult: string[], WinLines: G1009WinLineResult[], winScatters: any[], winBonus: any[], isExpandWild: boolean, expandWildIndices: number, isEndround: boolean, jackpotWinPoint: number) {\r\n\t\tcellsResult[0] = \"Core\";\r\n\t\tcellsResult[1] = \"Core\";\r\n\t\tcellsResult[12] = \"Reactor\";\r\n\t\tcellsResult[3] = \"Core\";\r\n\t\tcellsResult[4] = \"Core\";\r\n\t\tWinLines = Object.assign([], this.WinLines);\r\n\t\tWinLines[0].SetWinSymbol(cellsResult[0]);\r\n\t\tWinLines[1].SetWinSymbol(cellsResult[5]);\r\n\t\tWinLines[2].SetWinSymbol(cellsResult[10]);\r\n\t\tisExpandWild = true;\r\n\t\texpandWildIndices = 12;\r\n\t\tjackpotWinPoint = 1000000;\r\n\t\treturn { featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround, jackpotWinPoint };\r\n\t}\r\n\r\n\tprivate fakeBigWinInShortFreespins(featureDatas: any[], featureData: {}, cellsResult: string[], WinLines: G1009WinLineResult[], winScatters: any[], winBonus: any[], isExpandWild: boolean, expandWildIndices: number, isEndround: boolean) {\r\n\t\tif (!this.isFreespins)\r\n\t\t{\r\n\t\t\tthis.totalWinPoint = 0;\r\n\t\t\tthis.isFreespins = true;\r\n\t\t\tfeatureDatas.push(featureData);\r\n\t\t\tthis.freespinLeft = 2;\r\n\t\t\tthis.totalFreespins = 2;\r\n\t\t\tcellsResult = [\"A\", \"A\", \"A\", \"A\", \"A\", \"Q\", \"Q\", \"Q\", \"Q\", \"Q\", \"Scatter\", \"K\", \"Scatter\", \"Core\", \"Scatter\"];\r\n\t\t\tWinLines = this.winLineAndScatter;\r\n\t\t\twinScatters = this.winScatters;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.freespinLeft--;\r\n\t\t\t//fake winline\r\n\t\t\tWinLines = Object.assign([], this.WinLines);\r\n\t\t\tWinLines[0].SetWinSymbol(cellsResult[0]);\r\n\t\t\tWinLines[1].SetWinSymbol(cellsResult[5]);\r\n\t\t\tWinLines[2].SetWinSymbol(cellsResult[10]);\r\n\r\n\t\t\t//fake expand wild\r\n\t\t\tcellsResult[7] = \"Reactor\";\r\n\t\t\tisExpandWild = true;\r\n\r\n\t\t\tif (this.freespinLeft == 0)\r\n\t\t\t{\r\n\t\t\t\tisEndround = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround };\r\n\t}\r\n\r\n\tprivate fakeFreespinWin(featureDatas: any[], featureData: {}, cellsResult: string[], WinLines: G1009WinLineResult[], winScatters: any[], winBonus: any[], isExpandWild: boolean, expandWildIndices: number, isEndround: boolean) {\r\n\t\tif (!this.isFreespins)\r\n\t\t{\r\n\t\t\tthis.totalWinPoint = 0;\r\n\t\t\tthis.isFreespins = true;\r\n\t\t\tfeatureDatas.push(featureData);\r\n\t\t\tthis.freespinLeft = TOTAL_FREESPINS;\r\n\t\t\tthis.totalFreespins = TOTAL_FREESPINS;\r\n\t\t\tcellsResult = [\"A\", \"A\", \"A\", \"A\", \"A\", \"Q\", \"Q\", \"Q\", \"Q\", \"Q\", \"Scatter\", \"K\", \"Scatter\", \"Core\", \"Scatter\"];\r\n\t\t\tWinLines = this.winLineAndScatter;\r\n\t\t\twinScatters = this.winScatters;\r\n\t\t}\r\n\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.freespinLeft--;\r\n\t\t\tif (this.freespinLeft == TOTAL_FREESPINS - 1)\r\n\t\t\t{\r\n\t\t\t\tfeatureData = {\r\n\t\t\t\t\thitRule: \"bonus\",\r\n\t\t\t\t\ttotalFreespins: 0,\r\n\t\t\t\t\tisRetrigger: false,\r\n\t\t\t\t};\r\n\t\t\t\tfeatureDatas.push(featureData);\r\n\t\t\t\tcellsResult[1] = \"Bonus\";\r\n\t\t\t\tcellsResult[2] = \"Bonus\";\r\n\t\t\t\tcellsResult[3] = \"Bonus\";\r\n\t\t\t\twinBonus = this.winBonus;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t//fake winline\r\n\t\t\t\tWinLines = Object.assign([], this.WinLines);\r\n\t\t\t\tWinLines[0].SetWinSymbol(cellsResult[0]);\r\n\t\t\t\tWinLines[1].SetWinSymbol(cellsResult[5]);\r\n\t\t\t\tWinLines[2].SetWinSymbol(cellsResult[10]);\r\n\r\n\r\n\t\t\t\t//fake expand wild\r\n\t\t\t\tcellsResult[7] = \"Reactor\";\r\n\t\t\t\tisExpandWild = true;\r\n\t\t\t}\r\n\t\t\tif (this.freespinLeft == 0)\r\n\t\t\t{\r\n\t\t\t\tisEndround = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn { featureData, cellsResult, WinLines, winScatters, winBonus, isExpandWild, expandWildIndices, isEndround };\r\n\t}\r\n\r\n\tprivate generateDemoResult(): string[] {\r\n\t\tlet demoArray = [\r\n\t\t\t\"A\", \"K\", \"Q\", \"J\", \"Bonus\", \"Communicator\", \"Helmet\", \"Mechanic\"\r\n\t\t\t, \"Pilot\", \"Wrench\", \"Core\"];\r\n\r\n\t\tlet templateResult = [];\r\n\t\tfor (let index = 0; index < 15; index++)\r\n\t\t{\r\n\t\t\tlet randomIndex = Math.floor(Math.random() * (demoArray.length - 1));\r\n\t\t\ttemplateResult[index] = demoArray[randomIndex];\r\n\t\t}\r\n\t\tthis.WinLines.forEach(line => {\r\n\t\t\tlet randomIndex = Math.floor(Math.random() * (demoArray.length - 1));\r\n\t\t\tline.GetWinLine().forEach(winlineContentIndex => {\r\n\t\t\t\ttemplateResult[winlineContentIndex] = demoArray[randomIndex];\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn templateResult;\r\n\t}\r\n\r\n\tprivate simulatorServer() {\r\n\t\tlet delaytime = Math.floor(Math.random() * 2);\r\n\t\tlet sep = cc.sequence(\r\n\t\t\tcc.delayTime(delaytime)\r\n\t\t\t, cc.callFunc(() => {\r\n\t\t\t\tG1009EventManager.GetInstance().notify(\"NextScrollData\", this.result);\r\n\t\t\t}, this));\r\n\t\tthis.node.runAction(sep);\r\n\t}\r\n}"]}