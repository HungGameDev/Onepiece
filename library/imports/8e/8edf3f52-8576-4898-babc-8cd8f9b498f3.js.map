{"version":3,"sources":["assets\\Script\\UI\\present-win\\Slot45-present-win-panel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { SlottyParameter } from \"../../Slot45-game-config\";\r\nimport Slot45GameController from \"../../base/controller/Slot45-game-controller\";\r\nimport { Slot45EventManager } from \"../../base/events/Slot45-event-manager\";\r\nimport { Slot45BalanceModel } from \"../../models/Slot45-balance-model\";\r\nimport { Slot45BetModel } from \"../../models/Slot45-bet-model\";\r\nimport Slot45WinCellItemActor from \"./Slot45-win-cell-item\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\nconst BIG_WIN_TRIGGER_POINT = 5;\r\n@ccclass\r\nexport default class Slot45WinPanelActor extends cc.Component {\r\n\r\n\tItems: Slot45WinCellItemActor[] = [];\r\n\tcellsResult: string[];\r\n\twinLine: Slot45WinLineResult[];\r\n\tprivate jackpotWinLine: Slot45WinLineResult;\r\n\tprivate triggerWinLine: Slot45WinLineResult[];\r\n\tprivate allWinLine: Slot45WinLineResult = null;\r\n\twinScatters: Slot45WinLineResult[];\r\n\tfeatureDatas: [];\r\n\twinNumber: number;\r\n\tcount: number = 0;\r\n\tdelayTime: number = 1;\r\n\tdelayTransitionTime: number = 0.1;\r\n\tdelayedCount: number = 0;\r\n\tshowAllCount: number = 0;\r\n\tisFreespins: boolean = false;\r\n\ttotalFreeSpin: number = 0;\r\n\tisAlreadyChangeState: boolean = false;\r\n\tprivate winPoint: number = 0;\r\n\tprivate totalWinPoint: number = 0;\r\n\tprivate jackpotWinPoint: number = 0;\r\n\tprivate isBigwinTriggered: boolean = false;\r\n\tprivate expandWildIndices: number[] = [];\r\n\tprivate tweenPresentation: cc.Tween = null;\r\n\tprivate tweenPresentationWinLine: cc.Tween = null;\r\n\r\n\tprivate isCompleteOneLoop: boolean = false;\r\n\r\n\tprivate comboData = null;\r\n\r\n\tprotected onLoad(): void {\r\n\t\tthis.register();\r\n\t\tthis.Items = this.node.getComponentsInChildren(Slot45WinCellItemActor);\r\n\t\tthis.Items.sort(function (a, b) { return a.cellIndex - b.cellIndex });\r\n\t\tthis.Items.forEach(item => item.Hide());\r\n\t}\r\n\r\n\tprivate register(): void {\r\n\t\tSlot45EventManager.GetInstance().register(\"WinDataRespond\", this.onSetFinalReSource.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"PresentWinStart\", this.onPresentWinStart.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"SpinStarted\", this.onSpinStarted.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"ExpandWildStarted\", this.onExpandWildStarted.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"ExpandWildHide\", this.onExpandWildHide.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"BigWinCompleted\", this.onBigWinCompleted.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"JackpotCompleted\", this.onJackpotCompleted.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"JackpotStarted\", this.onJackpotStarted.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"EnterFreespins\", this.onEnterFreespins.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"featureWinCompleted\", this.onFeatureWinCompleted.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"resume\", this.onResume.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"PresentAllWinComplete\", this.onPresentAllWinComplete.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"BonusWinComplete\", this.reset.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"EnterBonus\", this.onEnterBonus.bind(this));\r\n\t\tSlot45EventManager.GetInstance().register(\"ExplodeCellsComplete\", this.onExplodeCellsComplete.bind(this));\r\n\r\n\t}\r\n\r\n\tprivate onResume(data: any) {\r\n\t\tif (data.isFreespins) {\r\n\t\t\tthis.isFreespins = true;\r\n\t\t\tthis.totalWinPoint = data.totalWinPoint;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onEnterFreespins(): void {\r\n\t\tthis.isFreespins = true;\r\n\t}\r\n\r\n\tprivate onFeatureWinCompleted(data): void {\r\n\r\n\t\tif (data && data.hitRule == \"bonus\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.isFreespins = false;\r\n\t}\r\n\r\n\tprivate onSpinStarted(): void {\r\n\t\tthis.isCompleteOneLoop = false;\r\n\t\tthis.expandWildIndices = [];\r\n\t\tthis.reset();\r\n\t}\r\n\r\n\tprivate onPresentWinStart(): void {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.Items.forEach(item => item.Show());\r\n\t\t\tthis.isAlreadyChangeState = false;\r\n\t\t\tif (this.checkJackpotTriggered()) {\r\n\t\t\t\tSlot45EventManager.GetInstance().notify(\"JackpotTriggered\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.presentAllWin();\r\n\t\t\t}\r\n\t\t}, 100);\r\n\t}\r\n\r\n\tonExplodeCellsComplete() {\r\n\t\tthis.updateDataWinPanelByComboData();\r\n\t\t// this.isBigwinTriggered = (this.checkBigWinTriggered() && !Slot45GameController.GetInstance().CheckBonusPointTrigger() && !this.checkJackpotTriggered());\r\n\t\tthis.isBigwinTriggered = (this.checkBigWinTriggered() && !Slot45GameController.GetInstance().CheckBonusPointTrigger() && this.jackpotWinPoint <= 0);\r\n\t\tvar hasCombo = Slot45GameController.GetInstance().CheckComboWinPresentation();\r\n\t\tif (hasCombo) {\r\n\t\t\tthis.onPresentWinStart();\r\n\t\t}\r\n\t\telse if (this.isBigwinTriggered) {\r\n\t\t\tthis.startBigWin();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.transitionNextState();\r\n\t\t}\r\n\t}\r\n\r\n\tonEnterBonus(dataWinBonus) {\r\n\t\tvar winPoint = 0;\r\n\t\tdataWinBonus.forEach(data => {\r\n\t\t\twinPoint += data.winPoint;\r\n\t\t});\r\n\t\tif (winPoint > 0) {\r\n\t\t\tthis.totalWinPoint += winPoint;\r\n\t\t\tSlot45EventManager.GetInstance().notify(\"IncreaseTotalWin\", winPoint);\r\n\t\t}\r\n\t}\r\n\r\n\tupdateDataWinPanelByComboData() {\r\n\t\tthis.cellsResult = this.comboData.Cells;\r\n\t\tthis.winLine = this.comboData.WinLines;\r\n\t\tthis.allWinLine = this.comboData.allWinLine;\r\n\t\tthis.winPoint = this.comboData.winPoint;\r\n\t\tfor (let index = 0; index < this.cellsResult.length; index++) {\r\n\t\t\tthis.Items[index].Hide();\r\n\t\t\tthis.Items[index].SetItem(this.cellsResult[index]);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate checkBigWinTriggered(): boolean {\r\n\t\treturn this.totalWinPoint / Slot45BetModel.GetInstance().GetTotalBetPoint() > BIG_WIN_TRIGGER_POINT;\r\n\t}\r\n\r\n\tprivate checkJackpotTriggered(): boolean {\r\n\t\tvar haveWinLineJackpot = false;\r\n\t\tfor (let index = 0; index < this.winLine.length; index++) {\r\n\t\t\tconst winLineData = this.winLine[index];\r\n\t\t\tif (winLineData.GetWinSymbol() == \"Jackpot\" && winLineData.GetWinLine().length == 5) {\r\n\t\t\t\thaveWinLineJackpot = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.jackpotWinPoint > 0 && haveWinLineJackpot;\r\n\t}\r\n\r\n\tprotected presentAllWin(): void {\r\n\t\tconst winData = this.allWinLine;\r\n\t\tthis.playSoundSFX(winData.CheckIsAllWin());\r\n\t\tSlot45EventManager.GetInstance().notify(\"NotificationWinMessage\", {\r\n\t\t\tisAllWin: winData.CheckIsAllWin(),\r\n\t\t\tWinPoint: winData.GetWinPoint(),\r\n\t\t\tWinSymbol: winData.GetWinSymbol(),\r\n\t\t\tWinNumber: winData.GetWinNumber()\r\n\t\t});\r\n\r\n\t\tif (this.winPoint > 0) {\r\n\t\t\tthis.totalWinPoint += this.winPoint;\r\n\t\t\tSlot45EventManager.GetInstance().notify(\"IncreaseTotalWin\", this.winPoint);\r\n\t\t}\r\n\r\n\t\tthis.showWinSymbols(this.allWinLine.GetWinLine());\r\n\t\tthis.OnShowLine(this.allWinLine.GetWinNumber());\r\n\t\tthis.count = 0;\r\n\t\tthis.tweenPresentation = cc.tween(this.node)\r\n\t\t\t.delay(this.delayTime)\r\n\t\t\t.call(() => {\r\n\t\t\t\tif (Slot45GameController.GetInstance().CheckComboWinPresentation()) {\r\n\t\t\t\t\tthis.comboData = Slot45GameController.GetInstance().GetComboData();\r\n\t\t\t\t\tthis.presentWinCombo();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.sequenceWinPresentation();\r\n\t\t\t\t\tthis.transitionNextState();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.start();\r\n\t}\r\n\r\n\tprivate presentWinCombo() {\r\n\t\tthis.reset();\r\n\t\tSlot45EventManager.GetInstance().notify(\"StartPresentWinCombo\", this.comboData);\r\n\t\tSlot45EventManager.GetInstance().notify('PlaySFX', { sfxName: \"sfx_explosive\", isLoop: false });\r\n\t}\r\n\r\n\tprivate startBigWin(): void {\r\n\t\tif (this.isBigwinTriggered) {\r\n\t\t\tthis.Items.forEach(i => i.ShowStaticFrame());\r\n\t\t\tSlot45EventManager.GetInstance().notify(\"BigWinStarted\", this.totalWinPoint);\r\n\t\t} else {\r\n\t\t\tthis.onBigWinCompleted();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onBigWinCompleted(): void {\r\n\t\tthis.Items.forEach(i => i.HideStaticFrame());\r\n\t\tvar delay = 0;\r\n\t\tif (this.isBigwinTriggered) {\r\n\t\t\tdelay = 0.5;\r\n\t\t}\r\n\t\tsetTimeout(() => {\r\n\t\t\tif (this.checkJackpotTriggered()) {\r\n\t\t\t\tconst winData = this.jackpotWinLine[0];\r\n\t\t\t\tif (winData != undefined && winData != null) {\r\n\t\t\t\t\tthis.playSoundSFX(false);\r\n\t\t\t\t\tSlot45EventManager.GetInstance().notify(\"NotificationWinMessage\", {\r\n\t\t\t\t\t\tisAllWin: winData.CheckIsAllWin(),\r\n\t\t\t\t\t\tWinPoint: winData.GetWinPoint(),\r\n\t\t\t\t\t\tWinSymbol: winData.GetWinSymbol(),\r\n\t\t\t\t\t\tWinNumber: winData.GetWinNumber()\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showTriggerWinSymbols(winData.GetWinLine());\r\n\t\t\t\t\tthis.OnShowLine(winData.GetWinNumber());\r\n\t\t\t\t\tthis.tweenPresentation = cc.tween(this.node)\r\n\t\t\t\t\t\t.delay(this.delayTransitionTime)\r\n\t\t\t\t\t\t.call(() => {\r\n\t\t\t\t\t\t\tthis.transitionNextState();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.start();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse if (Slot45GameController.GetInstance().CheckBonusFeatureTrigger()) {\r\n\t\t\t\tconst winData = this.triggerWinLine[0];\r\n\t\t\t\tif (winData != undefined && winData != null) {\r\n\t\t\t\t\tthis.playSoundSFX(false);\r\n\t\t\t\t\tSlot45EventManager.GetInstance().notify(\"NotificationWinMessage\", {\r\n\t\t\t\t\t\tisAllWin: winData.CheckIsAllWin(),\r\n\t\t\t\t\t\tWinPoint: winData.GetWinPoint(),\r\n\t\t\t\t\t\tWinSymbol: winData.GetWinSymbol(),\r\n\t\t\t\t\t\tWinNumber: winData.GetWinNumber()\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showTriggerWinSymbols(winData.GetWinLine());\r\n\t\t\t\t\tSlot45EventManager.GetInstance().notify(\"showTriggerWinSymbols\");\r\n\t\t\t\t\tthis.OnShowLine(winData.GetWinNumber());\r\n\t\t\t\t\tthis.tweenPresentation = cc.tween(this.node)\r\n\t\t\t\t\t\t.delay(this.delayTransitionTime)\r\n\t\t\t\t\t\t.call(() => {\r\n\t\t\t\t\t\t\tthis.transitionNextState();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.start();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tthis.count = 0;\r\n\t\t\t\tthis.sequenceWinPresentation();\r\n\t\t\t}\r\n\t\t\tthis.transitionNextState();\r\n\t\t}, delay);\r\n\t}\r\n\r\n\tprivate sequenceWinPresentation(): void {\r\n\t\tif (!(this.winLine.length > 0)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.count >= this.winLine.length) {\r\n\t\t\tthis.count = 0;\r\n\t\t\tthis.isCompleteOneLoop = true;\r\n\t\t}\r\n\t\tconst winIndex = this.count;\r\n\t\tconst winData = this.winLine[this.count];\r\n\t\tif (!this.isCompleteOneLoop)\r\n\t\t\tthis.playSoundSFX(winData.CheckIsAllWin());\r\n\t\tSlot45EventManager.GetInstance().notify(\"NotificationWinMessage\", {\r\n\t\t\tisAllWin: winData.CheckIsAllWin(),\r\n\t\t\tWinPoint: winData.GetWinPoint(),\r\n\t\t\tWinSymbol: winData.GetWinSymbol(),\r\n\t\t\tWinNumber: winData.GetWinNumber()\r\n\t\t});\r\n\t\tthis.showWinSymbols(this.winLine[winIndex].GetWinLine());\r\n\t\tthis.OnShowLine(this.winLine[winIndex].GetWinNumber());\r\n\t\tthis.count++;\r\n\t\tthis.tweenPresentationWinLine = cc.tween(this.node)\r\n\t\t\t.delay(this.delayTime)\r\n\t\t\t.call(() => {\r\n\t\t\t\tthis.sequenceWinPresentation();\r\n\t\t\t})\r\n\t\t\t.start();\r\n\t}\r\n\r\n\tprivate onJackpotStarted(): void {\r\n\t\tthis.showWinSymbols(this.jackpotWinLine.GetWinLine());\r\n\t}\r\n\r\n\tprivate onJackpotCompleted(): void {\r\n\t\tthis.presentAllWin()\r\n\t}\r\n\r\n\tprivate onSetFinalReSource(finalResult: any): void {\r\n\t\tlet _finalResult = Object.assign({}, finalResult);\r\n\t\tthis.cellsResult = _finalResult.Cells;\r\n\t\tthis.winLine = _finalResult.WinLines;\r\n\t\tthis.allWinLine = _finalResult.allWinLine;\r\n\t\tthis.jackpotWinLine = _finalResult.jackpotWinLine;\r\n\t\tthis.triggerWinLine = _finalResult.WinScatters.concat(_finalResult.WinBonus);\r\n\t\tthis.featureDatas = _finalResult.featureDatas;\r\n\t\tthis.winPoint = finalResult.winPoint;\r\n\t\tthis.jackpotWinPoint = finalResult.jackpotWinPoint;\r\n\t\tfor (let index = 0; index < this.cellsResult.length; index++) {\r\n\t\t\tthis.Items[index].Hide();\r\n\t\t\tthis.Items[index].SetItem(this.cellsResult[index]);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate playSoundSFX(isAllWin: boolean): void {\r\n\t\tif (!isAllWin && !Slot45GameController.GetInstance().CheckBonusFeatureTrigger()) {\r\n\t\t\tSlot45EventManager.GetInstance().notify('PlaySFX', { sfxName: 'sfx_symbolwin', isLoop: false });\r\n\t\t}\r\n\t}\r\n\r\n\tprivate transitionNextState(): void {\r\n\t\tthis.totalWinPoint = Slot45GameController.GetInstance().GetTotalWinPoint();\r\n\t\tif (!this.isAlreadyChangeState) {\r\n\t\t\tthis.isAlreadyChangeState = true;\r\n\t\t\t// if (this.checkJackpotTriggered()) {\r\n\t\t\t// \tSlot45EventManager.GetInstance().notify(\"JackpotTriggered\");\r\n\t\t\t// \treturn;\r\n\t\t\t// }\r\n\t\t\tif (Slot45GameController.GetInstance().CheckBonusFeatureTrigger()) {\r\n\t\t\t\tvar dataFeature = Slot45GameController.GetInstance().GetFeatureWinData();\r\n\t\t\t\tSlot45EventManager.GetInstance().notify(\"FeatureTrigger\", dataFeature);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (Slot45GameController.GetInstance().CheckFreespinContinue()) {\r\n\t\t\t\tthis.reset();\r\n\t\t\t\tSlot45EventManager.GetInstance().notify(\"Spin\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (Slot45GameController.GetInstance().CheckFreespinEnd()) {\r\n\t\t\t\tthis.reset();\r\n\t\t\t\tthis.totalWinPoint = 0;\r\n\t\t\t\tSlot45EventManager.GetInstance().notify(\"FeatureComplete\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.totalWinPoint = 0;\r\n\t\t\tconsole.warn('transitionNextState:, ', this.totalWinPoint);\r\n\t\t\tSlot45EventManager.GetInstance().notify(\"EndRound\");\r\n\t\t}\r\n\t}\r\n\r\n\tprivate OnShowLine(line: number[]): void {\r\n\t\tSlot45EventManager.GetInstance().notify(\"ShowLine\", line);\r\n\t}\r\n\r\n\tprivate OnHideAllLine(): void {\r\n\t\tSlot45EventManager.GetInstance().notify(\"ResetAllLine\");\r\n\t}\r\n\r\n\tprivate showWinSymbols(winLine: number[]) {\r\n\t\tSlot45EventManager.GetInstance().notify(\"ShowWinCells\", winLine);\r\n\t\tfor (let index = 0; index < winLine.length; index++) {\r\n\t\t\tthis.Items.find(item => item.cellIndex == winLine[index]).PlayWinAnimation();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate showTriggerWinSymbols(winLine: number[]) {\r\n\t\tfor (let index = 0; index < winLine.length; index++) {\r\n\t\t\tthis.Items.find(item => item.cellIndex == winLine[index]).PlayWinTrigger();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate onExpandWildStarted(expandWildIndices: any) {\r\n\t\tthis.expandWildIndices = Object.assign([], expandWildIndices);\r\n\t\tthis.expandWildIndices.forEach(index => {\r\n\t\t\tlet reelIndex = SlottyParameter.GetReelIndex(index);\r\n\t\t\tthis.Items[SlottyParameter.GetCellIndex(reelIndex, 0)].node.active = false;\r\n\t\t\tthis.Items[SlottyParameter.GetCellIndex(reelIndex, 1)].node.active = false;\r\n\t\t\tthis.Items[SlottyParameter.GetCellIndex(reelIndex, 2)].node.active = false;\r\n\t\t})\r\n\t}\r\n\r\n\tprivate onExpandWildHide() {\r\n\t\tthis.Items.forEach(item => item.node.active = true);\r\n\t}\r\n\r\n\tprivate reset(): void {\r\n\t\tthis.tweenPresentation && this.tweenPresentation.stop();\r\n\t\tthis.tweenPresentationWinLine && this.tweenPresentationWinLine.stop();\r\n\t\tthis.isBigwinTriggered = false;\r\n\t\tthis.cellsResult = [];\r\n\t\tthis.Items.forEach(item => {\r\n\t\t\titem.Hide();\r\n\t\t\titem.Reset();\r\n\t\t\titem.node.active = true;\r\n\t\t});\r\n\t\tthis.delayedCount = 0;\r\n\t\tthis.count = 0;\r\n\t\tthis.OnHideAllLine();\r\n\t}\r\n\r\n\tprivate onPresentAllWinComplete(): void {\r\n\t\t// this.Items.forEach(item => {\r\n\t\t// \titem.node.active = false;\r\n\t\t// \titem.node.opacity = 0;\r\n\t\t// });\r\n\t\t// this.OnHideAllLine();\r\n\t}\r\n}\r\nexport class Slot45WinLineResult {\r\n\tprivate winLine: number[];\r\n\tprivate winPoint: number;\r\n\tprivate winNumber: number[];\r\n\tprivate winSymbol: string;\r\n\tprivate isAllWin: boolean;\r\n\tprivate isTriggerWinLine: boolean;\r\n\r\n\tpublic constructor(winline: number[], winPoint: number, winNumber: number[], winSymbol: string = \"\", isAllWin: boolean = false, isTriggerWinLine: boolean = false) {\r\n\t\tthis.winLine = winline;\r\n\t\tthis.winPoint = winPoint;\r\n\t\tthis.winNumber = winNumber;\r\n\t\tthis.winSymbol = winSymbol;\r\n\t\tthis.isAllWin = isAllWin;\r\n\t\tthis.isTriggerWinLine = isTriggerWinLine;\r\n\t}\r\n\r\n\tpublic GetWinLine(): number[] {\r\n\t\treturn this.winLine;\r\n\t}\r\n\r\n\tpublic GetWinNumber(): number[] {\r\n\t\treturn this.winNumber;\r\n\t}\r\n\r\n\tpublic GetWinSymbol(): string {\r\n\t\treturn this.winSymbol;\r\n\t}\r\n\r\n\tpublic GetWinPoint(): number {\r\n\t\treturn this.winPoint;\r\n\t}\r\n\r\n\tpublic CheckIsAllWin(): boolean {\r\n\t\treturn this.isAllWin;\r\n\t}\r\n\r\n\tpublic CheckIsTriggerWinLine(): boolean {\r\n\t\treturn this.isTriggerWinLine;\r\n\t}\r\n\r\n\tpublic SetWinSymbol(winSymbol: string): void {\r\n\t\tthis.winSymbol = winSymbol;\r\n\t}\r\n}\r\n"]}